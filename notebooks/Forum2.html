
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Forum 2 - From Metadata to Insights &#8212; My Jupyter Book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=35598371" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/Forum2';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Forum 2 Overview - From Metadata to Insights" href="../tutorials/forum2-overview.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">My Jupyter Book</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    SSP Data Forums: Building a Connected, Data-Capable SBES Community
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Details</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../details/ssp-overview.html">üåê SSP Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../details/organizing-team.html">Organizing Team</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Preparation &amp; Technical Details</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../prep/who-should-attend.html"><img alt="group" height="36" src="/images/group.png" width="36"/> Who Should Attend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prep/what-to-expect.html">üìÖ What to Expect</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prep/what-to-bring.html">üß© What to Keep in Mind</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prep/technical-notes.html">‚öôÔ∏è Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prep/additional-resources.html">üìö Additional Resources</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../tutorials/forum1-overview.html">Forum 1 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/forum2-overview.html">Forum 2 Overview - From Metadata to Insights</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Forum 2 - From Metadata to Insights</a></li>

</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/Forum2.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Forum 2 - From Metadata to Insights</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Forum 2 - From Metadata to Insights</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#goals">Goals:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-this">Why do this?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-and-setup-imports">Introduction and Setup (Imports)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-search-for-datasets">Step 1: Search for Datasets</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-search-for-10-results">Simple search for 10 results</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#search-with-more-than-10-results">Search with more than 10 results</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#subsetting-our-results">Subsetting Our Results</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-get-dataset-metadata-and-files">Step 2: Get Dataset Metadata and Files</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-metadata-for-a-single-dataset">Getting metadata for a single dataset</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#file-level-metadata">File level metadata</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#full-dataset-metadata">Full dataset metadata</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transform-the-results-from-json">Transform the results from JSON</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-metadata-for-multiple-datasets">Getting metadata for multiple datasets</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-download-a-file">Step 3: Download a File</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examine-the-dataset">Examine the dataset</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#variable-names">Variable names</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#unfortunately-nws-region-only-has-four-regions-nonetheless-it-might-be-useful-at-some-point">Unfortunately, ‚Äúnws_region‚Äù only has four regions.  Nonetheless, it might be useful at some point.</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#break">Break</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-4-merge-with-weather-data">Step 4: Merge with Weather Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iowa-mesonet-api-do-not-run-at-this-time">Iowa Mesonet API - DO NOT RUN AT THIS TIME</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iowa-mesonet-data-joining-the-survey-data-with-weather-alerts">Iowa Mesonet Data - Joining the Survey Data with Weather Alerts</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exporting-the-data-for-use-outside-jupyter">Exporting the Data for Use Outside Jupyter</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examining-the-data">Examining the Data</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-visualizations">Quick visualizations</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-wwwas-by-survey-reponses">Visualizing WWWAs by Survey Reponses</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-statistical-analyses">Quick Statistical Analyses</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#chi-square">Chi-Square</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#logistic-regression">Logistic Regression</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ordinal-logistic-regression">Ordinal Logistic Regression</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-bit-more-involved-did-wwas-really-affect-risk-perception">A Bit More Involved - Did WWAs <em>Really</em> Affect Risk Perception?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-possible-interpretation">A possible interpretation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#wrapping-up">Wrapping Up</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#moving-forward">Moving Forward</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="forum-2-from-metadata-to-insights">
<h1>Forum 2 - From Metadata to Insights<a class="headerlink" href="#forum-2-from-metadata-to-insights" title="Link to this heading">#</a></h1>
<p>Author: Jonathon Mote, PhD - Weather Program Office
September 2025</p>
<p>This tutorial is designed for social scientists who want to explore how their own data might begin to interface with weather and hazard datasets.  The tutorial will provide a quick overview of Jupyter notebooks and tools, some geospatial tools, and API access for environmental and weather data.</p>
<section id="goals">
<h2>Goals:<a class="headerlink" href="#goals" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p><strong>Work with APIs</strong> to search for, access, and download data programmatically</p></li>
<li><p>Organize, explore, and download datasets interactively using python libraries like <strong>pandas</strong> and <strong>requests</strong>.</p></li>
<li><p>Merge survey data with external data from the <strong>Iowa Environmental Mesonet</strong></p></li>
<li><p>Apply <strong>geospatial tools</strong> to handle location-based data</p></li>
<li><p>Create clear, reproducible <strong>visualizations</strong> and <strong>statistical analyses</strong> directly alongside your analysis</p></li>
<li><p>Document our process in a way that combines code, results, and explanation all in one place</p></li>
</ol>
<p>Note: Ensure that the datasets are open access, or you have an API key for restricted access.  For this example, the datasets in this notebook do not require an API key.</p>
</section>
<section id="why-do-this">
<h2>Why do this?<a class="headerlink" href="#why-do-this" title="Link to this heading">#</a></h2>
<p>In general, the integration of weather and hazard data, and addressing both temporal and spatial resolutions, might allow for a deeper understanding of how people perceive, interpret, and respond to weather and climate risks in relation to the actual meteorological conditions they experience.  For this tutorial, a range of potential research questions can be posed:</p>
<ol class="arabic simple">
<li><p>How accurately do people perceive the frequency or severity of extreme weather events in their area?</p></li>
<li><p>Are there socioeconomic or demographic predictors of inaccurate weather risk perception?</p></li>
<li><p>Do people who recall receiving more weather warnings perceive greater weather risk?</p></li>
<li><p>Is there a mismatch between how meteorologists frame risk (as understood by watches and warnings) and how the public interprets it?</p></li>
<li><p>Are individuals who have experienced extreme weather more likely to change their behavior or risk perception?</p></li>
</ol>
</section>
<section id="introduction-and-setup-imports">
<h2>Introduction and Setup (Imports)<a class="headerlink" href="#introduction-and-setup-imports" title="Link to this heading">#</a></h2>
<p>In Jupyter, there are a large number of python-based ‚Äúlibraries‚Äù that help with data loading, transformation, and analysis.  These libraries provide tools that help us do things like make graphs, work with data, or do more complex calculations, like regression.  It‚Äôs good practice to have all libraries imported at the beginning.  You can always add (even install) libraries as you go along, you just have to rerun the cells (or restart the <em>kernel</em> if a new install).</p>
<p>In this tutorial, the primary libraries we will use are:</p>
<p><em>Data Handling</em></p>
<ul class="simple">
<li><p><strong>pandas</strong>: For working with tabular data in DataFrames.  It is commonly imported with an alias (pd), so we don‚Äôt constantly have to type out pandas.</p></li>
<li><p><strong>requests</strong>: For easily fetching data from web APIs and URLs (using GET, POST, etc).</p></li>
<li><p><strong>timedelta</strong>: Imported from the datetime library, for representing time intervals.</p></li>
<li><p><strong>BytesIO</strong>: Imported from the IO library, for treating in-memory bytes like a file for reading.</p></li>
<li><p><strong>ast</strong>: A python module which can be used for evaluating strings.</p></li>
</ul>
<p><em>Geospatial</em></p>
<ul class="simple">
<li><p><strong>geopandas</strong>: To work with geospatial data, allowing us to perform spatial operations and handle geometries such as points, polygons, and lines.</p></li>
<li><p><strong>Point</strong>: Imported from Shapely, for creating geometric points for mapping.</p></li>
</ul>
<p><em>Visualization</em></p>
<ul class="simple">
<li><p><strong>Pyplot</strong>: Imported from MatPlotLib using the alias ‚Äúplt‚Äù, for making simple customizable  plots and charts.</p></li>
<li><p><strong>Seaborn</strong>: Imported using the alias ‚Äúsns‚Äù, for making better looking visualizations.</p></li>
</ul>
<p><em>Utilities</em></p>
<ul class="simple">
<li><p><strong>time</strong>: Provides functions for working with time, such as measuring durations, pausing executions, and accessing system time.</p></li>
<li><p><strong>tqdm</strong>: Adds progress bars to loops for tracking execution.</p></li>
</ul>
<p><em>Statistical Modeling/Inference</em></p>
<ul class="simple">
<li><p><strong>scipy.stats.chi2_contingency</strong>: Imported from Scipy, to run a chi-square test of independence to check if two categorical variables are related.</p></li>
<li><p><strong>statsmodels.api as sm</strong>: Imported with the alias ‚Äúsm‚Äù, it provides tools for statistical models, including logistic regression.</p></li>
<li><p><strong>OrderedModel</strong>: Imported from statsmodels, used for ordinal logistic regression models when outcomes are ordered categories.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#import libraries</span>

<span class="c1"># data handling</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">timedelta</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">io</span><span class="w"> </span><span class="kn">import</span> <span class="n">BytesIO</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">Counter</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ast</span>

<span class="c1"># geospatial</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Point</span>

<span class="c1">#visualization</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>

<span class="c1">#utilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tqdm</span><span class="w"> </span><span class="kn">import</span> <span class="n">tqdm</span>

<span class="c1">#statistical modeling/inference</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span> <span class="n">chi2_contingency</span>        
<span class="kn">import</span><span class="w"> </span><span class="nn">statsmodels.api</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sm</span>                    
<span class="kn">from</span><span class="w"> </span><span class="nn">statsmodels.miscmodels.ordinal_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">OrderedModel</span> 
</pre></div>
</div>
</div>
</div>
</section>
<section id="step-1-search-for-datasets">
<h2>Step 1: Search for Datasets<a class="headerlink" href="#step-1-search-for-datasets" title="Link to this heading">#</a></h2>
<p>In this step, we will explore API access to a data repository, the Harvard Dataverse.  An API (Application Programming Interface) is just a set of rules and tools that allows different software to communication and interact with each other.  In this case, we want our Jupyter notebook to interact with the server for information on datasets.  We use the python library ‚ÄúRequests‚Äù to simplify and automate our requests, and Dataverse returns what we requested (hopefully), typically in a format called JSON.  We then use Pandas to transform the JSON in a dataframe, making the results easier to read and manipulate.</p>
<ul class="simple">
<li><p><strong>Note</strong>: Not all APIs are created equally and there might be differences across repositories.  Check each API‚Äôs documentation for how to get started, authentication, search and data access, and more.  For Harvard‚Äôs Dataverse, the <a class="reference external" href="https://guides.dataverse.org/en/latest/api/index.html">Dataverse API Guide</a> is a comprehensive, up-to-date documentation for all operations in Harvard‚Äôs Dataverse.</p></li>
</ul>
<section id="simple-search-for-10-results">
<h3>Simple search for 10 results<a class="headerlink" href="#simple-search-for-10-results" title="Link to this heading">#</a></h3>
<p>By default, the Harvard Dataverse only returns 10 results per search request.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># requires requests and pandas</span>

<span class="c1"># Define search query</span>
<span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;ripberger&quot;</span>
<span class="n">search_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://dataverse.harvard.edu/api/search?q=</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&amp;type=dataset&quot;</span>

<span class="c1"># Perform search</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">search_url</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="c1"># Convert items to DataFrame</span>
<span class="n">items</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;items&#39;</span><span class="p">]</span>
<span class="n">df_results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>

<span class="c1"># Show key columns</span>
<span class="c1">#df_results[[&#39;name&#39;, &#39;global_id&#39;, &#39;published_at&#39;, &#39;citation&#39;]]</span>
<span class="n">df_results</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>type</th>
      <th>url</th>
      <th>global_id</th>
      <th>description</th>
      <th>published_at</th>
      <th>publisher</th>
      <th>citationHtml</th>
      <th>identifier_of_dataverse</th>
      <th>name_of_dataverse</th>
      <th>...</th>
      <th>versionState</th>
      <th>majorVersion</th>
      <th>minorVersion</th>
      <th>createdAt</th>
      <th>updatedAt</th>
      <th>contacts</th>
      <th>publications</th>
      <th>authors</th>
      <th>image_url</th>
      <th>keywords</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>A comprehensive inventory and review of color ...</td>
      <td>dataset</td>
      <td>https://doi.org/10.7910/DVN/IFBAZ4</td>
      <td>doi:10.7910/DVN/IFBAZ4</td>
      <td>This dataset contains an inventory of colors u...</td>
      <td>2025-04-22T13:26:32Z</td>
      <td>Harvard Dataverse</td>
      <td>Ripberger, Joseph; Bitterman, Abby; Rosen, Zoe...</td>
      <td>harvard</td>
      <td>Harvard Dataverse</td>
      <td>...</td>
      <td>RELEASED</td>
      <td>1</td>
      <td>0</td>
      <td>2025-03-27T13:54:15Z</td>
      <td>2025-04-22T13:26:32Z</td>
      <td>[{'name': 'Ripberger, Joseph', 'affiliation': ...</td>
      <td>[{}]</td>
      <td>[Ripberger, Joseph, Bitterman, Abby, Rosen, Zoey]</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>S3OK Surveys</td>
      <td>dataset</td>
      <td>https://doi.org/10.7910/DVN/JHLMBU</td>
      <td>doi:10.7910/DVN/JHLMBU</td>
      <td>This repository contains data and accompanying...</td>
      <td>2025-08-29T11:02:55Z</td>
      <td>The Oklahoma Meso-Scale Integrated Socio-Geogr...</td>
      <td>Ripberger, Joseph; Jenkins-Smith, Hank; Carlso...</td>
      <td>msisnet</td>
      <td>The Oklahoma Meso-Scale Integrated Socio-Geogr...</td>
      <td>...</td>
      <td>RELEASED</td>
      <td>1</td>
      <td>0</td>
      <td>2025-08-26T18:21:10Z</td>
      <td>2025-08-29T11:02:55Z</td>
      <td>[{'name': 'Ripberger, Joseph', 'affiliation': ...</td>
      <td>[{}]</td>
      <td>[Ripberger, Joseph, Ripberger, Joseph, Jenkins...</td>
      <td>https://dataverse.harvard.edu/api/datasets/120...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>WX18</td>
      <td>dataset</td>
      <td>https://doi.org/10.7910/DVN/RHT4ON</td>
      <td>doi:10.7910/DVN/RHT4ON</td>
      <td>The Severe Weather and Society Survey (WX) was...</td>
      <td>2020-02-03T22:11:23Z</td>
      <td>Extreme Weather and Society Survey</td>
      <td>Ripberger, Joseph; Silva, Carol; Jenkins-Smith...</td>
      <td>wxsurvey</td>
      <td>Extreme Weather and Society Survey</td>
      <td>...</td>
      <td>RELEASED</td>
      <td>1</td>
      <td>1</td>
      <td>2020-01-13T14:26:39Z</td>
      <td>2020-09-01T14:43:00Z</td>
      <td>[{'name': 'Ripberger, Joseph', 'affiliation': ...</td>
      <td>[{}]</td>
      <td>[Ripberger, Joseph, Silva, Carol, Jenkins-Smit...</td>
      <td>https://dataverse.harvard.edu/api/datasets/365...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>WX19</td>
      <td>dataset</td>
      <td>https://doi.org/10.7910/DVN/MLCJEW</td>
      <td>doi:10.7910/DVN/MLCJEW</td>
      <td>The Severe Weather and Society Survey (WX) was...</td>
      <td>2020-02-03T22:10:59Z</td>
      <td>Extreme Weather and Society Survey</td>
      <td>Ripberger, Joseph; Silva, Carol; Jenkins-Smith...</td>
      <td>wxsurvey</td>
      <td>Extreme Weather and Society Survey</td>
      <td>...</td>
      <td>RELEASED</td>
      <td>1</td>
      <td>1</td>
      <td>2020-01-13T14:28:14Z</td>
      <td>2020-09-01T14:43:57Z</td>
      <td>[{'name': 'Ripberger, Joseph', 'affiliation': ...</td>
      <td>[{}]</td>
      <td>[Ripberger, Joseph, Silva, Carol, Jenkins-Smit...</td>
      <td>https://dataverse.harvard.edu/api/datasets/365...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>WX17</td>
      <td>dataset</td>
      <td>https://doi.org/10.7910/DVN/GSTYK4</td>
      <td>doi:10.7910/DVN/GSTYK4</td>
      <td>The Severe Weather and Society Survey (WX17) w...</td>
      <td>2020-02-03T22:10:34Z</td>
      <td>Extreme Weather and Society Survey</td>
      <td>Ripberger, Joseph; Silva, Carol; Jenkins-Smith...</td>
      <td>wxsurvey</td>
      <td>Extreme Weather and Society Survey</td>
      <td>...</td>
      <td>RELEASED</td>
      <td>1</td>
      <td>1</td>
      <td>2020-01-28T20:00:17Z</td>
      <td>2020-09-01T14:41:58Z</td>
      <td>[{'name': 'Ripberger, Joseph', 'affiliation': ...</td>
      <td>[{}]</td>
      <td>[Ripberger, Joseph, Silva, Carol, Jenkins-Smit...</td>
      <td>https://dataverse.harvard.edu/api/datasets/367...</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>5 rows √ó 26 columns</p>
</div></div></div>
</div>
</section>
<section id="search-with-more-than-10-results">
<h3>Search with more than 10 results<a class="headerlink" href="#search-with-more-than-10-results" title="Link to this heading">#</a></h3>
<p>We can make an API call that goes beyond the 10 result limit by creating a loop.  The ‚Äúwhile True‚Äù statement will continue running (10 results at a time) until there are no results remaining.  We collect all of the results in one list using the ‚Äúextend‚Äù command.  Finally, we can limit the dataframe to only view a subset of columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;ripberger&quot;</span>
<span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">per_page</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># Max per page is 100</span>
<span class="n">all_items</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">search_url</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;https://dataverse.harvard.edu/api/search?&quot;</span>
        <span class="sa">f</span><span class="s2">&quot;q=</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&amp;type=dataset&amp;start=</span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2">&amp;per_page=</span><span class="si">{</span><span class="n">per_page</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
    
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">search_url</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    
    <span class="n">items</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;items&#39;</span><span class="p">]</span>
    <span class="n">all_items</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
    
    <span class="c1"># Break if fewer than per_page results are returned (i.e., last page)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">per_page</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="n">start</span> <span class="o">+=</span> <span class="n">per_page</span>

<span class="c1"># Convert to DataFrame</span>
<span class="n">df_results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">all_items</span><span class="p">)</span>
<span class="n">df_results</span><span class="p">[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;global_id&#39;</span><span class="p">,</span> <span class="s1">&#39;published_at&#39;</span><span class="p">,</span> <span class="s1">&#39;citation&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>global_id</th>
      <th>published_at</th>
      <th>citation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>A comprehensive inventory and review of color ...</td>
      <td>doi:10.7910/DVN/IFBAZ4</td>
      <td>2025-04-22T13:26:32Z</td>
      <td>Ripberger, Joseph; Bitterman, Abby; Rosen, Zoe...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>S3OK Surveys</td>
      <td>doi:10.7910/DVN/JHLMBU</td>
      <td>2025-08-29T11:02:55Z</td>
      <td>Ripberger, Joseph; Jenkins-Smith, Hank; Carlso...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>WX18</td>
      <td>doi:10.7910/DVN/RHT4ON</td>
      <td>2020-02-03T22:11:23Z</td>
      <td>Ripberger, Joseph; Silva, Carol; Jenkins-Smith...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>WX19</td>
      <td>doi:10.7910/DVN/MLCJEW</td>
      <td>2020-02-03T22:10:59Z</td>
      <td>Ripberger, Joseph; Silva, Carol; Jenkins-Smith...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>WX17</td>
      <td>doi:10.7910/DVN/GSTYK4</td>
      <td>2020-02-03T22:10:34Z</td>
      <td>Ripberger, Joseph; Silva, Carol; Jenkins-Smith...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#How many datasets?  Each row (first number) represents a dataset.</span>
<span class="n">df_results</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(39, 26)
</pre></div>
</div>
</div>
</div>
</section>
<section id="subsetting-our-results">
<h3>Subsetting Our Results<a class="headerlink" href="#subsetting-our-results" title="Link to this heading">#</a></h3>
<p>Let‚Äôs say we don‚Äôt want all of these, but only a subset of related surveys.  For this step, and the remainder of notebook, we will focus on the yearly waves of the Extreme Weather and Society Survey (WXYY). So let‚Äôs subset them the dataframe from the earlier API call.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define the dataset names you want to filter on</span>
<span class="n">target_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;WX17&quot;</span><span class="p">,</span> <span class="s2">&quot;WX18&quot;</span><span class="p">,</span> <span class="s2">&quot;WX19&quot;</span><span class="p">,</span> <span class="s2">&quot;WX20&quot;</span><span class="p">,</span> <span class="s2">&quot;WX21&quot;</span><span class="p">,</span> <span class="s2">&quot;WX22&quot;</span><span class="p">,</span> <span class="s2">&quot;WX23&quot;</span><span class="p">,</span> <span class="s2">&quot;WX24&quot;</span><span class="p">]</span>

<span class="c1"># Subset the dataframe</span>
<span class="n">df_subset</span> <span class="o">=</span> <span class="n">df_results</span><span class="p">[</span><span class="n">df_results</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">target_names</span><span class="p">)]</span>

<span class="c1"># Display the result</span>
<span class="n">df_subset</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>type</th>
      <th>url</th>
      <th>global_id</th>
      <th>description</th>
      <th>published_at</th>
      <th>publisher</th>
      <th>citationHtml</th>
      <th>identifier_of_dataverse</th>
      <th>name_of_dataverse</th>
      <th>...</th>
      <th>versionState</th>
      <th>majorVersion</th>
      <th>minorVersion</th>
      <th>createdAt</th>
      <th>updatedAt</th>
      <th>contacts</th>
      <th>publications</th>
      <th>authors</th>
      <th>image_url</th>
      <th>keywords</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>WX18</td>
      <td>dataset</td>
      <td>https://doi.org/10.7910/DVN/RHT4ON</td>
      <td>doi:10.7910/DVN/RHT4ON</td>
      <td>The Severe Weather and Society Survey (WX) was...</td>
      <td>2020-02-03T22:11:23Z</td>
      <td>Extreme Weather and Society Survey</td>
      <td>Ripberger, Joseph; Silva, Carol; Jenkins-Smith...</td>
      <td>wxsurvey</td>
      <td>Extreme Weather and Society Survey</td>
      <td>...</td>
      <td>RELEASED</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>2020-01-13T14:26:39Z</td>
      <td>2020-09-01T14:43:00Z</td>
      <td>[{'name': 'Ripberger, Joseph', 'affiliation': ...</td>
      <td>[{}]</td>
      <td>[Ripberger, Joseph, Silva, Carol, Jenkins-Smit...</td>
      <td>https://dataverse.harvard.edu/api/datasets/365...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>WX19</td>
      <td>dataset</td>
      <td>https://doi.org/10.7910/DVN/MLCJEW</td>
      <td>doi:10.7910/DVN/MLCJEW</td>
      <td>The Severe Weather and Society Survey (WX) was...</td>
      <td>2020-02-03T22:10:59Z</td>
      <td>Extreme Weather and Society Survey</td>
      <td>Ripberger, Joseph; Silva, Carol; Jenkins-Smith...</td>
      <td>wxsurvey</td>
      <td>Extreme Weather and Society Survey</td>
      <td>...</td>
      <td>RELEASED</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>2020-01-13T14:28:14Z</td>
      <td>2020-09-01T14:43:57Z</td>
      <td>[{'name': 'Ripberger, Joseph', 'affiliation': ...</td>
      <td>[{}]</td>
      <td>[Ripberger, Joseph, Silva, Carol, Jenkins-Smit...</td>
      <td>https://dataverse.harvard.edu/api/datasets/365...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>WX17</td>
      <td>dataset</td>
      <td>https://doi.org/10.7910/DVN/GSTYK4</td>
      <td>doi:10.7910/DVN/GSTYK4</td>
      <td>The Severe Weather and Society Survey (WX17) w...</td>
      <td>2020-02-03T22:10:34Z</td>
      <td>Extreme Weather and Society Survey</td>
      <td>Ripberger, Joseph; Silva, Carol; Jenkins-Smith...</td>
      <td>wxsurvey</td>
      <td>Extreme Weather and Society Survey</td>
      <td>...</td>
      <td>RELEASED</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>2020-01-28T20:00:17Z</td>
      <td>2020-09-01T14:41:58Z</td>
      <td>[{'name': 'Ripberger, Joseph', 'affiliation': ...</td>
      <td>[{}]</td>
      <td>[Ripberger, Joseph, Silva, Carol, Jenkins-Smit...</td>
      <td>https://dataverse.harvard.edu/api/datasets/367...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>WX20</td>
      <td>dataset</td>
      <td>https://doi.org/10.7910/DVN/EWOCUA</td>
      <td>doi:10.7910/DVN/EWOCUA</td>
      <td>The Severe Weather and Society Survey (WX) was...</td>
      <td>2020-09-01T14:03:39Z</td>
      <td>Extreme Weather and Society Survey</td>
      <td>Ripberger, Joseph; Krocak, Makenzie; Silva, Ca...</td>
      <td>wxsurvey</td>
      <td>Extreme Weather and Society Survey</td>
      <td>...</td>
      <td>RELEASED</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>2020-08-05T13:29:07Z</td>
      <td>2020-09-01T14:46:05Z</td>
      <td>[{'name': 'Ripberger, Joseph', 'affiliation': ...</td>
      <td>[{}]</td>
      <td>[Ripberger, Joseph, Krocak, Makenzie, Silva, C...</td>
      <td>https://dataverse.harvard.edu/api/datasets/400...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>WX21</td>
      <td>dataset</td>
      <td>https://doi.org/10.7910/DVN/QYZLSO</td>
      <td>doi:10.7910/DVN/QYZLSO</td>
      <td>The Severe Weather and Society Survey (WX) was...</td>
      <td>2022-08-22T20:37:58Z</td>
      <td>Extreme Weather and Society Survey</td>
      <td>Ripberger, Joseph; Krocak, Makenzie; Silva, Ca...</td>
      <td>wxsurvey</td>
      <td>Extreme Weather and Society Survey</td>
      <td>...</td>
      <td>RELEASED</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>2021-07-08T16:26:55Z</td>
      <td>2022-08-22T20:37:58Z</td>
      <td>[{'name': 'Krocak, Makenzie', 'affiliation': '...</td>
      <td>NaN</td>
      <td>[Ripberger, Joseph, Krocak, Makenzie, Silva, C...</td>
      <td>https://dataverse.harvard.edu/api/datasets/488...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>14</th>
      <td>WX22</td>
      <td>dataset</td>
      <td>https://doi.org/10.7910/DVN/TD5DGD</td>
      <td>doi:10.7910/DVN/TD5DGD</td>
      <td>This report describes the results of an annual...</td>
      <td>2022-08-30T16:57:50Z</td>
      <td>Extreme Weather and Society Survey</td>
      <td>Bitterman, Abby; Krocak, Makenzie; Ripberger, ...</td>
      <td>wxsurvey</td>
      <td>Extreme Weather and Society Survey</td>
      <td>...</td>
      <td>RELEASED</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>2022-08-30T16:55:49Z</td>
      <td>2022-08-30T16:57:50Z</td>
      <td>[{'name': 'Krocak, Makenzie', 'affiliation': '...</td>
      <td>NaN</td>
      <td>[Bitterman, Abby, Krocak, Makenzie, Ripberger,...</td>
      <td>https://dataverse.harvard.edu/api/datasets/643...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>17</th>
      <td>WX23</td>
      <td>dataset</td>
      <td>https://doi.org/10.7910/DVN/PPXI8H</td>
      <td>doi:10.7910/DVN/PPXI8H</td>
      <td>This report describes the results of an annual...</td>
      <td>2024-04-29T18:59:56Z</td>
      <td>Extreme Weather and Society Survey</td>
      <td>Bitterman, Abby; Krocak, Makenzie; Ripberger, ...</td>
      <td>wxsurvey</td>
      <td>Extreme Weather and Society Survey</td>
      <td>...</td>
      <td>RELEASED</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>2023-09-13T16:07:51Z</td>
      <td>2024-04-29T18:59:56Z</td>
      <td>[{'name': 'Krocak, Makenzie', 'affiliation': '...</td>
      <td>NaN</td>
      <td>[Bitterman, Abby, Krocak, Makenzie, Ripberger,...</td>
      <td>https://dataverse.harvard.edu/api/datasets/736...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>20</th>
      <td>WX24</td>
      <td>dataset</td>
      <td>https://doi.org/10.7910/DVN/QMEKYJ</td>
      <td>doi:10.7910/DVN/QMEKYJ</td>
      <td>This report describes the results of an annual...</td>
      <td>2025-03-10T16:47:09Z</td>
      <td>Extreme Weather and Society Survey</td>
      <td>Bitterman, Abby; Krocak, Makenzie; Ripberger, ...</td>
      <td>wxsurvey</td>
      <td>Extreme Weather and Society Survey</td>
      <td>...</td>
      <td>RELEASED</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>2025-03-10T16:45:19Z</td>
      <td>2025-03-10T16:47:09Z</td>
      <td>[{'name': 'Krocak, Makenzie', 'affiliation': '...</td>
      <td>NaN</td>
      <td>[Bitterman, Abby, Krocak, Makenzie, Ripberger,...</td>
      <td>https://dataverse.harvard.edu/api/datasets/109...</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>8 rows √ó 26 columns</p>
</div></div></div>
</div>
</section>
</section>
<section id="step-2-get-dataset-metadata-and-files">
<h2>Step 2: Get Dataset Metadata and Files<a class="headerlink" href="#step-2-get-dataset-metadata-and-files" title="Link to this heading">#</a></h2>
<section id="getting-metadata-for-a-single-dataset">
<h3>Getting metadata for a single dataset<a class="headerlink" href="#getting-metadata-for-a-single-dataset" title="Link to this heading">#</a></h3>
<p>Let‚Äôs examine the metadata for one of the datasets in the subset, WX18.  The Dataverse uses it‚Äôs own API file metadata.  First, we will look at file-level metadata.  Next, we will pull the full dataset metadata.  Since the results will be in JSON, we will convert that to a flat file.</p>
</section>
<section id="file-level-metadata">
<h3>File level metadata<a class="headerlink" href="#file-level-metadata" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract persistent ID (DOI) from the first row [0] by position</span>
<span class="n">persistent_id</span> <span class="o">=</span> <span class="n">df_subset</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;global_id&#39;</span><span class="p">]</span>

<span class="c1"># Get dataset metadata</span>
<span class="n">metadata_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://dataverse.harvard.edu/api/datasets/:persistentId/?persistentId=</span><span class="si">{</span><span class="n">persistent_id</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">metadata_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">metadata_url</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="c1"># Display list of files</span>
<span class="n">files</span> <span class="o">=</span> <span class="n">metadata_response</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;latestVersion&#39;</span><span class="p">][</span><span class="s1">&#39;files&#39;</span><span class="p">]</span>
<span class="n">files</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;label&#39;: &#39;WX18_data_wtd.tab&#39;,
  &#39;restricted&#39;: False,
  &#39;version&#39;: 1,
  &#39;datasetVersionId&#39;: 210551,
  &#39;dataFile&#39;: {&#39;id&#39;: 3657710,
   &#39;persistentId&#39;: &#39;doi:10.7910/DVN/RHT4ON/7TRD5D&#39;,
   &#39;pidURL&#39;: &#39;https://doi.org/10.7910/DVN/RHT4ON/7TRD5D&#39;,
   &#39;filename&#39;: &#39;WX18_data_wtd.tab&#39;,
   &#39;contentType&#39;: &#39;text/tab-separated-values&#39;,
   &#39;friendlyType&#39;: &#39;Tab-Delimited&#39;,
   &#39;filesize&#39;: 2602546,
   &#39;storageIdentifier&#39;: &#39;s3://dvn-cloud:16f9f4bba61-8bbfafa227e7&#39;,
   &#39;originalFileFormat&#39;: &#39;text/csv&#39;,
   &#39;originalFormatLabel&#39;: &#39;Comma Separated Values&#39;,
   &#39;originalFileSize&#39;: 2609506,
   &#39;originalFileName&#39;: &#39;WX18_data_wtd.csv&#39;,
   &#39;UNF&#39;: &#39;UNF:6:Yyyznfcg+cNLP/7D2v9/wg==&#39;,
   &#39;rootDataFileId&#39;: -1,
   &#39;md5&#39;: &#39;c56b9b5ac4e603b085a00feabc4e6b04&#39;,
   &#39;checksum&#39;: {&#39;type&#39;: &#39;MD5&#39;, &#39;value&#39;: &#39;c56b9b5ac4e603b085a00feabc4e6b04&#39;},
   &#39;tabularData&#39;: True,
   &#39;creationDate&#39;: &#39;2020-01-13&#39;,
   &#39;publicationDate&#39;: &#39;2020-02-03&#39;,
   &#39;fileAccessRequest&#39;: False}},
 {&#39;label&#39;: &#39;WX18 Instrument.pdf&#39;,
  &#39;restricted&#39;: False,
  &#39;version&#39;: 1,
  &#39;datasetVersionId&#39;: 210551,
  &#39;dataFile&#39;: {&#39;id&#39;: 3657709,
   &#39;persistentId&#39;: &#39;doi:10.7910/DVN/RHT4ON/VBCEWA&#39;,
   &#39;pidURL&#39;: &#39;https://doi.org/10.7910/DVN/RHT4ON/VBCEWA&#39;,
   &#39;filename&#39;: &#39;WX18 Instrument.pdf&#39;,
   &#39;contentType&#39;: &#39;application/pdf&#39;,
   &#39;friendlyType&#39;: &#39;Adobe PDF&#39;,
   &#39;filesize&#39;: 234344,
   &#39;storageIdentifier&#39;: &#39;s3://dvn-cloud:16f9f4b7300-1ef8892476d5&#39;,
   &#39;rootDataFileId&#39;: -1,
   &#39;md5&#39;: &#39;4cc0791ef645b9c1440a005cf28ed7ce&#39;,
   &#39;checksum&#39;: {&#39;type&#39;: &#39;MD5&#39;, &#39;value&#39;: &#39;4cc0791ef645b9c1440a005cf28ed7ce&#39;},
   &#39;tabularData&#39;: False,
   &#39;creationDate&#39;: &#39;2020-01-13&#39;,
   &#39;publicationDate&#39;: &#39;2020-02-03&#39;,
   &#39;fileAccessRequest&#39;: False}},
 {&#39;label&#39;: &#39;WX18 Reference Report.pdf&#39;,
  &#39;restricted&#39;: False,
  &#39;version&#39;: 1,
  &#39;datasetVersionId&#39;: 210551,
  &#39;dataFile&#39;: {&#39;id&#39;: 3657708,
   &#39;persistentId&#39;: &#39;doi:10.7910/DVN/RHT4ON/PIZ2S6&#39;,
   &#39;pidURL&#39;: &#39;https://doi.org/10.7910/DVN/RHT4ON/PIZ2S6&#39;,
   &#39;filename&#39;: &#39;WX18 Reference Report.pdf&#39;,
   &#39;contentType&#39;: &#39;application/pdf&#39;,
   &#39;friendlyType&#39;: &#39;Adobe PDF&#39;,
   &#39;filesize&#39;: 437743,
   &#39;storageIdentifier&#39;: &#39;s3://dvn-cloud:16f9f4b6e56-79235ea20c8b&#39;,
   &#39;rootDataFileId&#39;: -1,
   &#39;md5&#39;: &#39;703b99829c8976ff33428ce2681afe9c&#39;,
   &#39;checksum&#39;: {&#39;type&#39;: &#39;MD5&#39;, &#39;value&#39;: &#39;703b99829c8976ff33428ce2681afe9c&#39;},
   &#39;tabularData&#39;: False,
   &#39;creationDate&#39;: &#39;2020-01-13&#39;,
   &#39;publicationDate&#39;: &#39;2020-02-03&#39;,
   &#39;fileAccessRequest&#39;: False}}]
</pre></div>
</div>
</div>
</div>
</section>
<section id="full-dataset-metadata">
<h3>Full dataset metadata<a class="headerlink" href="#full-dataset-metadata" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract persistent ID (DOI) from the first row</span>
<span class="n">persistent_id</span> <span class="o">=</span> <span class="n">df_subset</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;global_id&#39;</span><span class="p">]</span>

<span class="c1"># Get full dataset metadata (latest version)</span>
<span class="n">metadata_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://dataverse.harvard.edu/api/datasets/:persistentId/versions/:latest?persistentId=</span><span class="si">{</span><span class="n">persistent_id</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">metadata_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">metadata_url</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="c1"># Display the JSON</span>
<span class="n">metadata_response</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;status&#39;: &#39;OK&#39;,
 &#39;data&#39;: {&#39;id&#39;: 210551,
  &#39;datasetId&#39;: 3657707,
  &#39;datasetPersistentId&#39;: &#39;doi:10.7910/DVN/RHT4ON&#39;,
  &#39;datasetType&#39;: &#39;dataset&#39;,
  &#39;storageIdentifier&#39;: &#39;s3://10.7910/DVN/RHT4ON&#39;,
  &#39;versionNumber&#39;: 1,
  &#39;internalVersionNumber&#39;: 4,
  &#39;versionMinorNumber&#39;: 1,
  &#39;versionState&#39;: &#39;RELEASED&#39;,
  &#39;latestVersionPublishingState&#39;: &#39;RELEASED&#39;,
  &#39;deaccessionLink&#39;: &#39;&#39;,
  &#39;UNF&#39;: &#39;UNF:6:Yyyznfcg+cNLP/7D2v9/wg==&#39;,
  &#39;lastUpdateTime&#39;: &#39;2020-09-01T14:43:00Z&#39;,
  &#39;releaseTime&#39;: &#39;2020-09-01T14:43:00Z&#39;,
  &#39;createTime&#39;: &#39;2020-09-01T14:42:39Z&#39;,
  &#39;publicationDate&#39;: &#39;2020-02-03&#39;,
  &#39;citationDate&#39;: &#39;2020-02-03&#39;,
  &#39;license&#39;: {&#39;name&#39;: &#39;CC0 1.0&#39;,
   &#39;uri&#39;: &#39;http://creativecommons.org/publicdomain/zero/1.0&#39;,
   &#39;iconUri&#39;: &#39;https://licensebuttons.net/p/zero/1.0/88x31.png&#39;,
   &#39;rightsIdentifier&#39;: &#39;CC0-1.0&#39;,
   &#39;rightsIdentifierScheme&#39;: &#39;SPDX&#39;,
   &#39;schemeUri&#39;: &#39;https://spdx.org/licenses/&#39;,
   &#39;languageCode&#39;: &#39;en&#39;},
  &#39;fileAccessRequest&#39;: False,
  &#39;metadataBlocks&#39;: {&#39;citation&#39;: {&#39;displayName&#39;: &#39;Citation Metadata&#39;,
    &#39;name&#39;: &#39;citation&#39;,
    &#39;fields&#39;: [{&#39;typeName&#39;: &#39;title&#39;,
      &#39;multiple&#39;: False,
      &#39;typeClass&#39;: &#39;primitive&#39;,
      &#39;value&#39;: &#39;WX18&#39;},
     {&#39;typeName&#39;: &#39;author&#39;,
      &#39;multiple&#39;: True,
      &#39;typeClass&#39;: &#39;compound&#39;,
      &#39;value&#39;: [{&#39;authorName&#39;: {&#39;typeName&#39;: &#39;authorName&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;Ripberger, Joseph&#39;},
        &#39;authorAffiliation&#39;: {&#39;typeName&#39;: &#39;authorAffiliation&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;University of Oklahoma&#39;},
        &#39;authorIdentifierScheme&#39;: {&#39;typeName&#39;: &#39;authorIdentifierScheme&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;controlledVocabulary&#39;,
         &#39;value&#39;: &#39;ORCID&#39;},
        &#39;authorIdentifier&#39;: {&#39;typeName&#39;: &#39;authorIdentifier&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;0000-0003-0343-8262&#39;}},
       {&#39;authorName&#39;: {&#39;typeName&#39;: &#39;authorName&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;Silva, Carol&#39;},
        &#39;authorAffiliation&#39;: {&#39;typeName&#39;: &#39;authorAffiliation&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;University of Oklahoma&#39;},
        &#39;authorIdentifierScheme&#39;: {&#39;typeName&#39;: &#39;authorIdentifierScheme&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;controlledVocabulary&#39;,
         &#39;value&#39;: &#39;ORCID&#39;},
        &#39;authorIdentifier&#39;: {&#39;typeName&#39;: &#39;authorIdentifier&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;0000-0001-7171-6944&#39;}},
       {&#39;authorName&#39;: {&#39;typeName&#39;: &#39;authorName&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;Jenkins-Smith, Hank&#39;},
        &#39;authorAffiliation&#39;: {&#39;typeName&#39;: &#39;authorAffiliation&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;University of Oklahoma&#39;},
        &#39;authorIdentifierScheme&#39;: {&#39;typeName&#39;: &#39;authorIdentifierScheme&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;controlledVocabulary&#39;,
         &#39;value&#39;: &#39;ORCID&#39;},
        &#39;authorIdentifier&#39;: {&#39;typeName&#39;: &#39;authorIdentifier&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;0000-0002-5204-2726&#39;}},
       {&#39;authorName&#39;: {&#39;typeName&#39;: &#39;authorName&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;Krocak, Makenzie&#39;},
        &#39;authorAffiliation&#39;: {&#39;typeName&#39;: &#39;authorAffiliation&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;University of Oklahoma&#39;},
        &#39;authorIdentifierScheme&#39;: {&#39;typeName&#39;: &#39;authorIdentifierScheme&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;controlledVocabulary&#39;,
         &#39;value&#39;: &#39;ORCID&#39;},
        &#39;authorIdentifier&#39;: {&#39;typeName&#39;: &#39;authorIdentifier&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;0000-0002-0943-8725&#39;}}]},
     {&#39;typeName&#39;: &#39;datasetContact&#39;,
      &#39;multiple&#39;: True,
      &#39;typeClass&#39;: &#39;compound&#39;,
      &#39;value&#39;: [{&#39;datasetContactName&#39;: {&#39;typeName&#39;: &#39;datasetContactName&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;Ripberger, Joseph&#39;},
        &#39;datasetContactAffiliation&#39;: {&#39;typeName&#39;: &#39;datasetContactAffiliation&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;University of Oklahoma&#39;},
        &#39;datasetContactEmail&#39;: {&#39;typeName&#39;: &#39;datasetContactEmail&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;jtr@ou.edu&#39;}}]},
     {&#39;typeName&#39;: &#39;dsDescription&#39;,
      &#39;multiple&#39;: True,
      &#39;typeClass&#39;: &#39;compound&#39;,
      &#39;value&#39;: [{&#39;dsDescriptionValue&#39;: {&#39;typeName&#39;: &#39;dsDescriptionValue&#39;,
         &#39;multiple&#39;: False,
         &#39;typeClass&#39;: &#39;primitive&#39;,
         &#39;value&#39;: &#39;The Severe Weather and Society Survey (WX) was designed and administered by the Center for Risk and Crisis Management (CRCM) at the University of Oklahoma. This is the second survey in the annual series (see Silva et al., 2017 for information on WX17). WX18 was fielded July 6-11, 2018 using an online questionnaire that was completed by 3,000 U.S. adults (age 18+) that were recruited from an Internet panel that matches the characteristics of the U.S. population as estimated in the U.S. Census. Following WX17, which was designed to establish baseline measures of the extent to which U.S. adults receive, understand, and respond to severe weather forecasts and warnings, WX18 was designed to continue and, in some cases, refine the measurement of these concepts. Additionally, WX18 measured public trust in the National Weather Service (NWS), extreme weather and climate risk perceptions, risk literacy, interpretations of probabilistic language, and response efficacy.&#39;}}]},
     {&#39;typeName&#39;: &#39;subject&#39;,
      &#39;multiple&#39;: True,
      &#39;typeClass&#39;: &#39;controlledVocabulary&#39;,
      &#39;value&#39;: [&#39;Social Sciences&#39;]},
     {&#39;typeName&#39;: &#39;depositor&#39;,
      &#39;multiple&#39;: False,
      &#39;typeClass&#39;: &#39;primitive&#39;,
      &#39;value&#39;: &#39;Ripberger, Joseph&#39;},
     {&#39;typeName&#39;: &#39;dateOfDeposit&#39;,
      &#39;multiple&#39;: False,
      &#39;typeClass&#39;: &#39;primitive&#39;,
      &#39;value&#39;: &#39;2020-01-13&#39;}]}},
  &#39;files&#39;: [{&#39;label&#39;: &#39;WX18_data_wtd.tab&#39;,
    &#39;restricted&#39;: False,
    &#39;version&#39;: 1,
    &#39;datasetVersionId&#39;: 210551,
    &#39;dataFile&#39;: {&#39;id&#39;: 3657710,
     &#39;persistentId&#39;: &#39;doi:10.7910/DVN/RHT4ON/7TRD5D&#39;,
     &#39;pidURL&#39;: &#39;https://doi.org/10.7910/DVN/RHT4ON/7TRD5D&#39;,
     &#39;filename&#39;: &#39;WX18_data_wtd.tab&#39;,
     &#39;contentType&#39;: &#39;text/tab-separated-values&#39;,
     &#39;friendlyType&#39;: &#39;Tab-Delimited&#39;,
     &#39;filesize&#39;: 2602546,
     &#39;storageIdentifier&#39;: &#39;s3://dvn-cloud:16f9f4bba61-8bbfafa227e7&#39;,
     &#39;originalFileFormat&#39;: &#39;text/csv&#39;,
     &#39;originalFormatLabel&#39;: &#39;Comma Separated Values&#39;,
     &#39;originalFileSize&#39;: 2609506,
     &#39;originalFileName&#39;: &#39;WX18_data_wtd.csv&#39;,
     &#39;UNF&#39;: &#39;UNF:6:Yyyznfcg+cNLP/7D2v9/wg==&#39;,
     &#39;rootDataFileId&#39;: -1,
     &#39;md5&#39;: &#39;c56b9b5ac4e603b085a00feabc4e6b04&#39;,
     &#39;checksum&#39;: {&#39;type&#39;: &#39;MD5&#39;, &#39;value&#39;: &#39;c56b9b5ac4e603b085a00feabc4e6b04&#39;},
     &#39;tabularData&#39;: True,
     &#39;creationDate&#39;: &#39;2020-01-13&#39;,
     &#39;publicationDate&#39;: &#39;2020-02-03&#39;,
     &#39;fileAccessRequest&#39;: False}},
   {&#39;label&#39;: &#39;WX18 Instrument.pdf&#39;,
    &#39;restricted&#39;: False,
    &#39;version&#39;: 1,
    &#39;datasetVersionId&#39;: 210551,
    &#39;dataFile&#39;: {&#39;id&#39;: 3657709,
     &#39;persistentId&#39;: &#39;doi:10.7910/DVN/RHT4ON/VBCEWA&#39;,
     &#39;pidURL&#39;: &#39;https://doi.org/10.7910/DVN/RHT4ON/VBCEWA&#39;,
     &#39;filename&#39;: &#39;WX18 Instrument.pdf&#39;,
     &#39;contentType&#39;: &#39;application/pdf&#39;,
     &#39;friendlyType&#39;: &#39;Adobe PDF&#39;,
     &#39;filesize&#39;: 234344,
     &#39;storageIdentifier&#39;: &#39;s3://dvn-cloud:16f9f4b7300-1ef8892476d5&#39;,
     &#39;rootDataFileId&#39;: -1,
     &#39;md5&#39;: &#39;4cc0791ef645b9c1440a005cf28ed7ce&#39;,
     &#39;checksum&#39;: {&#39;type&#39;: &#39;MD5&#39;, &#39;value&#39;: &#39;4cc0791ef645b9c1440a005cf28ed7ce&#39;},
     &#39;tabularData&#39;: False,
     &#39;creationDate&#39;: &#39;2020-01-13&#39;,
     &#39;publicationDate&#39;: &#39;2020-02-03&#39;,
     &#39;fileAccessRequest&#39;: False}},
   {&#39;label&#39;: &#39;WX18 Reference Report.pdf&#39;,
    &#39;restricted&#39;: False,
    &#39;version&#39;: 1,
    &#39;datasetVersionId&#39;: 210551,
    &#39;dataFile&#39;: {&#39;id&#39;: 3657708,
     &#39;persistentId&#39;: &#39;doi:10.7910/DVN/RHT4ON/PIZ2S6&#39;,
     &#39;pidURL&#39;: &#39;https://doi.org/10.7910/DVN/RHT4ON/PIZ2S6&#39;,
     &#39;filename&#39;: &#39;WX18 Reference Report.pdf&#39;,
     &#39;contentType&#39;: &#39;application/pdf&#39;,
     &#39;friendlyType&#39;: &#39;Adobe PDF&#39;,
     &#39;filesize&#39;: 437743,
     &#39;storageIdentifier&#39;: &#39;s3://dvn-cloud:16f9f4b6e56-79235ea20c8b&#39;,
     &#39;rootDataFileId&#39;: -1,
     &#39;md5&#39;: &#39;703b99829c8976ff33428ce2681afe9c&#39;,
     &#39;checksum&#39;: {&#39;type&#39;: &#39;MD5&#39;, &#39;value&#39;: &#39;703b99829c8976ff33428ce2681afe9c&#39;},
     &#39;tabularData&#39;: False,
     &#39;creationDate&#39;: &#39;2020-01-13&#39;,
     &#39;publicationDate&#39;: &#39;2020-02-03&#39;,
     &#39;fileAccessRequest&#39;: False}}]}}
</pre></div>
</div>
</div>
</div>
</section>
<section id="transform-the-results-from-json">
<h3>Transform the results from JSON<a class="headerlink" href="#transform-the-results-from-json" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Flatten JSON into a single row using json_normalize</span>
<span class="n">df_meta</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">json_normalize</span><span class="p">(</span><span class="n">metadata_response</span><span class="p">)</span>

<span class="c1"># Transpose so keys become a column and values another</span>
<span class="n">df_meta_t</span> <span class="o">=</span> <span class="n">df_meta</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">df_meta_t</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;field&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">]</span>

<span class="n">df_meta_t</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>  <span class="c1"># show first 20 rows</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>field</th>
      <th>value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>status</td>
      <td>OK</td>
    </tr>
    <tr>
      <th>1</th>
      <td>data.id</td>
      <td>210551</td>
    </tr>
    <tr>
      <th>2</th>
      <td>data.datasetId</td>
      <td>3657707</td>
    </tr>
    <tr>
      <th>3</th>
      <td>data.datasetPersistentId</td>
      <td>doi:10.7910/DVN/RHT4ON</td>
    </tr>
    <tr>
      <th>4</th>
      <td>data.datasetType</td>
      <td>dataset</td>
    </tr>
    <tr>
      <th>5</th>
      <td>data.storageIdentifier</td>
      <td>s3://10.7910/DVN/RHT4ON</td>
    </tr>
    <tr>
      <th>6</th>
      <td>data.versionNumber</td>
      <td>1</td>
    </tr>
    <tr>
      <th>7</th>
      <td>data.internalVersionNumber</td>
      <td>4</td>
    </tr>
    <tr>
      <th>8</th>
      <td>data.versionMinorNumber</td>
      <td>1</td>
    </tr>
    <tr>
      <th>9</th>
      <td>data.versionState</td>
      <td>RELEASED</td>
    </tr>
    <tr>
      <th>10</th>
      <td>data.latestVersionPublishingState</td>
      <td>RELEASED</td>
    </tr>
    <tr>
      <th>11</th>
      <td>data.deaccessionLink</td>
      <td></td>
    </tr>
    <tr>
      <th>12</th>
      <td>data.UNF</td>
      <td>UNF:6:Yyyznfcg+cNLP/7D2v9/wg==</td>
    </tr>
    <tr>
      <th>13</th>
      <td>data.lastUpdateTime</td>
      <td>2020-09-01T14:43:00Z</td>
    </tr>
    <tr>
      <th>14</th>
      <td>data.releaseTime</td>
      <td>2020-09-01T14:43:00Z</td>
    </tr>
    <tr>
      <th>15</th>
      <td>data.createTime</td>
      <td>2020-09-01T14:42:39Z</td>
    </tr>
    <tr>
      <th>16</th>
      <td>data.publicationDate</td>
      <td>2020-02-03</td>
    </tr>
    <tr>
      <th>17</th>
      <td>data.citationDate</td>
      <td>2020-02-03</td>
    </tr>
    <tr>
      <th>18</th>
      <td>data.license.name</td>
      <td>CC0 1.0</td>
    </tr>
    <tr>
      <th>19</th>
      <td>data.license.uri</td>
      <td>http://creativecommons.org/publicdomain/zero/1.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="getting-metadata-for-multiple-datasets">
<h3>Getting metadata for multiple datasets<a class="headerlink" href="#getting-metadata-for-multiple-datasets" title="Link to this heading">#</a></h3>
<p>Let‚Äôs say we want the file-level metadata for all waves.  Against, we set up a loop call, to loop through all of the files using the persistent ID (DOI) and pick up the metadata information we want.  This time, we will limit the items we want to see (as seen in the ‚Äúfor f in files‚Äù loop below) and have the results formatted into a dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create an empty list to hold all file metadata</span>
<span class="n">all_files</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Loop through persistent IDs</span>
<span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">df_subset</span><span class="p">[</span><span class="s1">&#39;global_id&#39;</span><span class="p">]:</span>
    <span class="n">metadata_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://dataverse.harvard.edu/api/datasets/:persistentId/?persistentId=</span><span class="si">{</span><span class="n">pid</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">metadata_url</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;latestVersion&#39;</span><span class="p">][</span><span class="s1">&#39;files&#39;</span><span class="p">]</span>
        
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="n">file_info</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;dataset_title&#39;</span><span class="p">:</span> <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;latestVersion&#39;</span><span class="p">][</span><span class="s1">&#39;metadataBlocks&#39;</span><span class="p">][</span><span class="s1">&#39;citation&#39;</span><span class="p">][</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;value&#39;</span><span class="p">],</span>
                <span class="s1">&#39;file_id&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;dataFile&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
                <span class="s1">&#39;file_label&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">],</span>
                <span class="s1">&#39;file_size&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;dataFile&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;filesize&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                <span class="s1">&#39;file_description&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="s1">&#39;persistent_id&#39;</span><span class="p">:</span> <span class="n">pid</span>
            <span class="p">}</span>
            <span class="n">all_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file_info</span><span class="p">)</span>
    
    <span class="c1"># Be respectful of API limits</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># Convert to DataFrame</span>
<span class="n">df_files</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">all_files</span><span class="p">)</span>
<span class="n">df_files</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dataset_title</th>
      <th>file_id</th>
      <th>file_label</th>
      <th>file_size</th>
      <th>file_description</th>
      <th>persistent_id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>WX18</td>
      <td>3657710</td>
      <td>WX18_data_wtd.tab</td>
      <td>2602546</td>
      <td></td>
      <td>doi:10.7910/DVN/RHT4ON</td>
    </tr>
    <tr>
      <th>1</th>
      <td>WX18</td>
      <td>3657709</td>
      <td>WX18 Instrument.pdf</td>
      <td>234344</td>
      <td></td>
      <td>doi:10.7910/DVN/RHT4ON</td>
    </tr>
    <tr>
      <th>2</th>
      <td>WX18</td>
      <td>3657708</td>
      <td>WX18 Reference Report.pdf</td>
      <td>437743</td>
      <td></td>
      <td>doi:10.7910/DVN/RHT4ON</td>
    </tr>
    <tr>
      <th>3</th>
      <td>WX19</td>
      <td>3657724</td>
      <td>WX19_data_wtd.tab</td>
      <td>2872171</td>
      <td></td>
      <td>doi:10.7910/DVN/MLCJEW</td>
    </tr>
    <tr>
      <th>4</th>
      <td>WX19</td>
      <td>3657725</td>
      <td>WX19 Instrument.pdf</td>
      <td>205960</td>
      <td></td>
      <td>doi:10.7910/DVN/MLCJEW</td>
    </tr>
    <tr>
      <th>5</th>
      <td>WX19</td>
      <td>3657723</td>
      <td>WX19 Reference Report.pdf</td>
      <td>462399</td>
      <td></td>
      <td>doi:10.7910/DVN/MLCJEW</td>
    </tr>
    <tr>
      <th>6</th>
      <td>WX17</td>
      <td>3674405</td>
      <td>WX17_data_wtd.tab</td>
      <td>1935657</td>
      <td></td>
      <td>doi:10.7910/DVN/GSTYK4</td>
    </tr>
    <tr>
      <th>7</th>
      <td>WX17</td>
      <td>3674410</td>
      <td>WX17 Instrument.pdf</td>
      <td>776810</td>
      <td></td>
      <td>doi:10.7910/DVN/GSTYK4</td>
    </tr>
    <tr>
      <th>8</th>
      <td>WX17</td>
      <td>3674409</td>
      <td>WX17 Reference Report.pdf</td>
      <td>1348083</td>
      <td></td>
      <td>doi:10.7910/DVN/GSTYK4</td>
    </tr>
    <tr>
      <th>9</th>
      <td>WX20</td>
      <td>4004498</td>
      <td>WX20_data_wtd.tab</td>
      <td>2265980</td>
      <td></td>
      <td>doi:10.7910/DVN/EWOCUA</td>
    </tr>
    <tr>
      <th>10</th>
      <td>WX20</td>
      <td>4004499</td>
      <td>WX20 Instrument.pdf</td>
      <td>275558</td>
      <td></td>
      <td>doi:10.7910/DVN/EWOCUA</td>
    </tr>
    <tr>
      <th>11</th>
      <td>WX20</td>
      <td>4054174</td>
      <td>WX20 Reference Report.pdf</td>
      <td>2107866</td>
      <td></td>
      <td>doi:10.7910/DVN/EWOCUA</td>
    </tr>
    <tr>
      <th>12</th>
      <td>WX21</td>
      <td>4882758</td>
      <td>WX21_data_wtd.tab</td>
      <td>1085370</td>
      <td></td>
      <td>doi:10.7910/DVN/QYZLSO</td>
    </tr>
    <tr>
      <th>13</th>
      <td>WX21</td>
      <td>4882759</td>
      <td>WX21 Instrument.pdf</td>
      <td>258276</td>
      <td></td>
      <td>doi:10.7910/DVN/QYZLSO</td>
    </tr>
    <tr>
      <th>14</th>
      <td>WX21</td>
      <td>6425188</td>
      <td>WX21 reference report.pdf</td>
      <td>523004</td>
      <td></td>
      <td>doi:10.7910/DVN/QYZLSO</td>
    </tr>
    <tr>
      <th>15</th>
      <td>WX22</td>
      <td>6435540</td>
      <td>WX22_data_wtd.tab</td>
      <td>1082321</td>
      <td></td>
      <td>doi:10.7910/DVN/TD5DGD</td>
    </tr>
    <tr>
      <th>16</th>
      <td>WX22</td>
      <td>6435541</td>
      <td>WX22 Instrument.pdf</td>
      <td>329108</td>
      <td></td>
      <td>doi:10.7910/DVN/TD5DGD</td>
    </tr>
    <tr>
      <th>17</th>
      <td>WX22</td>
      <td>6435542</td>
      <td>WX22 Reference Report.pdf</td>
      <td>718129</td>
      <td></td>
      <td>doi:10.7910/DVN/TD5DGD</td>
    </tr>
    <tr>
      <th>18</th>
      <td>WX23</td>
      <td>7367274</td>
      <td>WX23_data_wtd.tab</td>
      <td>1237602</td>
      <td></td>
      <td>doi:10.7910/DVN/PPXI8H</td>
    </tr>
    <tr>
      <th>19</th>
      <td>WX23</td>
      <td>7367275</td>
      <td>WX23 Instrument.pdf</td>
      <td>326240</td>
      <td></td>
      <td>doi:10.7910/DVN/PPXI8H</td>
    </tr>
    <tr>
      <th>20</th>
      <td>WX23</td>
      <td>10162149</td>
      <td>WX23 reference report.pdf</td>
      <td>701193</td>
      <td></td>
      <td>doi:10.7910/DVN/PPXI8H</td>
    </tr>
    <tr>
      <th>21</th>
      <td>WX24</td>
      <td>10975177</td>
      <td>WX24_data_wtd.tab</td>
      <td>1097340</td>
      <td></td>
      <td>doi:10.7910/DVN/QMEKYJ</td>
    </tr>
    <tr>
      <th>22</th>
      <td>WX24</td>
      <td>10975176</td>
      <td>WX24 Instrument.pdf</td>
      <td>297155</td>
      <td></td>
      <td>doi:10.7910/DVN/QMEKYJ</td>
    </tr>
    <tr>
      <th>23</th>
      <td>WX24</td>
      <td>10975175</td>
      <td>WX24 reference report.pdf</td>
      <td>1030229</td>
      <td></td>
      <td>doi:10.7910/DVN/QMEKYJ</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
<section id="step-3-download-a-file">
<h2>Step 3: Download a File<a class="headerlink" href="#step-3-download-a-file" title="Link to this heading">#</a></h2>
<p>Above, we see that each dataset file (.tab) is accompanied by PDFs of the instrument and a reference report.</p>
<p>Let‚Äôs download the dataset file (.tab) for first year of the survey, WX18, which has a file_id of ‚Äú3657710‚Äù.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># File ID for WxEM_Wave1.tab</span>
<span class="n">file_id</span> <span class="o">=</span> <span class="mi">3657710</span>

<span class="c1"># Download directly to memory</span>
<span class="n">file_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://dataverse.harvard.edu/api/access/datafile/</span><span class="si">{</span><span class="n">file_id</span><span class="si">}</span><span class="s2">?format=original&quot;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">file_url</span><span class="p">)</span>

<span class="c1"># Load into pandas directly from memory, assuming comma-delimited content</span>
<span class="n">df_18</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;ISO-8859-1&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="p">,</span> <span class="n">on_bad_lines</span><span class="o">=</span><span class="s1">&#39;skip&#39;</span><span class="p">)</span>
<span class="n">df_18</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>p_id</th>
      <th>age</th>
      <th>age_group</th>
      <th>gend</th>
      <th>hisp</th>
      <th>race</th>
      <th>state</th>
      <th>zip</th>
      <th>nws_region</th>
      <th>lat</th>
      <th>...</th>
      <th>begin_datetime</th>
      <th>end_datetime</th>
      <th>begin_date</th>
      <th>end_date</th>
      <th>begin_time</th>
      <th>end_time</th>
      <th>time_taken</th>
      <th>censusproportion</th>
      <th>surveyproportion</th>
      <th>weightfactor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>EPO77VBNDHYXC5L4M3</td>
      <td>54</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>4</td>
      <td>Illinois</td>
      <td>60060</td>
      <td>Central Region</td>
      <td>42.200806</td>
      <td>...</td>
      <td>1530900028</td>
      <td>1530900853</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:00:00</td>
      <td>13:14:00</td>
      <td>13</td>
      <td>0.001122</td>
      <td>0.003155</td>
      <td>0.355626</td>
    </tr>
    <tr>
      <th>1</th>
      <td>EPO77VDZDV5LMGD4M9</td>
      <td>66</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Maryland</td>
      <td>21921</td>
      <td>Eastern Region</td>
      <td>39.575394</td>
      <td>...</td>
      <td>1530900035</td>
      <td>1530901159</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:00:00</td>
      <td>13:19:00</td>
      <td>18</td>
      <td>0.027792</td>
      <td>0.032461</td>
      <td>0.856166</td>
    </tr>
    <tr>
      <th>2</th>
      <td>EPO77VFD67MR5R44M7</td>
      <td>54</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>New York</td>
      <td>14420</td>
      <td>Eastern Region</td>
      <td>43.250793</td>
      <td>...</td>
      <td>1530900046</td>
      <td>1530900927</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:00:00</td>
      <td>13:15:00</td>
      <td>14</td>
      <td>0.030340</td>
      <td>0.057592</td>
      <td>0.526809</td>
    </tr>
    <tr>
      <th>3</th>
      <td>EPO77VFJ2CJKML44M9</td>
      <td>56</td>
      <td>5</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Utah</td>
      <td>84097</td>
      <td>Western Region</td>
      <td>40.296799</td>
      <td>...</td>
      <td>1530900046</td>
      <td>1530900878</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:00:00</td>
      <td>13:14:00</td>
      <td>13</td>
      <td>0.024319</td>
      <td>0.034826</td>
      <td>0.698300</td>
    </tr>
    <tr>
      <th>4</th>
      <td>EPO77VFD4CZHV2M4M0</td>
      <td>66</td>
      <td>6</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>California</td>
      <td>90620</td>
      <td>Western Region</td>
      <td>33.875504</td>
      <td>...</td>
      <td>1530900048</td>
      <td>1530900993</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:00:00</td>
      <td>13:16:00</td>
      <td>15</td>
      <td>0.020574</td>
      <td>0.023217</td>
      <td>0.886161</td>
    </tr>
  </tbody>
</table>
<p>5 rows √ó 223 columns</p>
</div></div></div>
</div>
<section id="examine-the-dataset">
<h3>Examine the dataset<a class="headerlink" href="#examine-the-dataset" title="Link to this heading">#</a></h3>
<p>Pandas has a number of attributes that can be used to examine characteristics of the dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># See basic shape of the data (rows, columns).  Each row represents a respondent.</span>
<span class="n">df_18</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(3000, 223)
</pre></div>
</div>
</div>
</div>
<section id="variable-names">
<h4>Variable names<a class="headerlink" href="#variable-names" title="Link to this heading">#</a></h4>
<p>Listing the columns shows all the variable names contained in the data.  To integrate with weather data, we are most interested in locating possible ways to join the data.  Typically, geographic variables are a good start.  In this survey, some good possible variables are state, zip, lat/lon.  These are pretty straightforward, but what about ‚Äúnws_region‚Äù?  Does it contain WFOs?  Let‚Äôs examine.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># List all column names</span>
<span class="n">df_18</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;p_id&#39;,
 &#39;age&#39;,
 &#39;age_group&#39;,
 &#39;gend&#39;,
 &#39;hisp&#39;,
 &#39;race&#39;,
 &#39;state&#39;,
 &#39;zip&#39;,
 &#39;nws_region&#39;,
 &#39;lat&#39;,
 &#39;lon&#39;,
 &#39;long_years&#39;,
 &#39;long_months&#39;,
 &#39;last_state&#39;,
 &#39;now&#39;,
 &#39;rural&#39;,
 &#39;home&#39;,
 &#39;home_spec&#39;,
 &#39;rent&#39;,
 &#39;adults&#39;,
 &#39;children&#39;,
 &#39;follow&#39;,
 &#39;plan_around&#39;,
 &#39;und_weather&#39;,
 &#39;risk_wind&#39;,
 &#39;risk_rain&#39;,
 &#39;risk_heat&#39;,
 &#39;risk_drought&#39;,
 &#39;risk_cold&#39;,
 &#39;risk_snow&#39;,
 &#39;risk_tor&#39;,
 &#39;risk_flood&#39;,
 &#39;risk_hur&#39;,
 &#39;risk_fire&#39;,
 &#39;risk_tie&#39;,
 &#39;alert_und&#39;,
 &#39;tortrack&#39;,
 &#39;torwatch&#39;,
 &#39;torwarn&#39;,
 &#39;warn_prob_area&#39;,
 &#39;prob_dist&#39;,
 &#39;warn_prob_house&#39;,
 &#39;warn_cons&#39;,
 &#39;warn_time&#39;,
 &#39;warn_size&#39;,
 &#39;warn_time_minutes&#39;,
 &#39;warn_time_hours&#39;,
 &#39;watch_prob_area&#39;,
 &#39;watch_prob_house&#39;,
 &#39;watch_cons&#39;,
 &#39;watch_time&#39;,
 &#39;watch_size&#39;,
 &#39;watch_time_minutes&#39;,
 &#39;watch_time_hours&#39;,
 &#39;tor_watchwarn_und&#39;,
 &#39;tor_map_und&#39;,
 &#39;tor_radar_und&#39;,
 &#39;svr_hail&#39;,
 &#39;svr_wind&#39;,
 &#39;svr_lightning&#39;,
 &#39;svr_flood&#39;,
 &#39;svr_rain&#39;,
 &#39;svr_watchwarn_und&#39;,
 &#39;rec_all&#39;,
 &#39;rec_most&#39;,
 &#39;rec_soon&#39;,
 &#39;rec_miss&#39;,
 &#39;rec_area&#39;,
 &#39;rec_time&#39;,
 &#39;rec_sleep&#39;,
 &#39;rec_driving&#39;,
 &#39;rec_work&#39;,
 &#39;rec_store&#39;,
 &#39;rec_small_group&#39;,
 &#39;rec_large_group&#39;,
 &#39;rec_dif_sit&#39;,
 &#39;warn_hist&#39;,
 &#39;warn_when&#39;,
 &#39;warn_how_br_rad&#39;,
 &#39;warn_how_wx_rad&#39;,
 &#39;warn_how_tv&#39;,
 &#39;warn_how_siren&#39;,
 &#39;warn_how_int&#39;,
 &#39;warn_how_soc&#39;,
 &#39;warn_how_word&#39;,
 &#39;warn_how_phone&#39;,
 &#39;warn_how_oth&#39;,
 &#39;warn_how_spec&#39;,
 &#39;warn_how_dk&#39;,
 &#39;warn_timercv&#39;,
 &#39;warn_where&#39;,
 &#39;warn_where_specify&#39;,
 &#39;warn_iss&#39;,
 &#39;warn_sure&#39;,
 &#39;warn_tor&#39;,
 &#39;last_act&#39;,
 &#39;last_act_spec&#39;,
 &#39;last_act_satis&#39;,
 &#39;last_act_again&#39;,
 &#39;next_act_day&#39;,
 &#39;next_act_day_spec&#39;,
 &#39;next_act_night&#39;,
 &#39;next_act_night_spec&#39;,
 &#39;next_act_car&#39;,
 &#39;resp_ignore&#39;,
 &#39;resp_prot&#39;,
 &#39;resp_busy&#39;,
 &#39;resp_unsure&#39;,
 &#39;resp_sleep&#39;,
 &#39;resp_driving&#39;,
 &#39;resp_work&#39;,
 &#39;resp_store&#39;,
 &#39;resp_small_group&#39;,
 &#39;resp_large_group&#39;,
 &#39;resp_dif_sit&#39;,
 &#39;rand_morn&#39;,
 &#39;rec_morn&#39;,
 &#39;und_morn&#39;,
 &#39;resp_morn&#39;,
 &#39;rand_aft&#39;,
 &#39;rec_aft&#39;,
 &#39;und_aft&#39;,
 &#39;resp_aft&#39;,
 &#39;rand_eve&#39;,
 &#39;rec_eve&#39;,
 &#39;und_eve&#39;,
 &#39;resp_eve&#39;,
 &#39;short_torhit_time&#39;,
 &#39;short_torhit_resp&#39;,
 &#39;short_torhit_resp_confidence&#39;,
 &#39;short_torhit_resp_protect&#39;,
 &#39;long_torhit_time&#39;,
 &#39;long_torhit_resp&#39;,
 &#39;long_torhit_resp_confidence&#39;,
 &#39;long_torhit_resp_protect&#39;,
 &#39;tor_eff1&#39;,
 &#39;tor_eff2&#39;,
 &#39;tor_eff3&#39;,
 &#39;tor_eff4&#39;,
 &#39;tor_eff5&#39;,
 &#39;tor_eff6&#39;,
 &#39;tor_eff7&#39;,
 &#39;tor_eff8&#39;,
 &#39;nws_trust&#39;,
 &#39;lotv_trust&#39;,
 &#39;natv_trust&#39;,
 &#39;em_trust&#39;,
 &#39;fam_trust&#39;,
 &#39;wx_info1&#39;,
 &#39;wx_info2&#39;,
 &#39;wx_info3&#39;,
 &#39;wx_info4&#39;,
 &#39;wx_info5&#39;,
 &#39;wx_info6&#39;,
 &#39;wx_info7&#39;,
 &#39;wx_info8&#39;,
 &#39;wx_info_tie&#39;,
 &#39;prob_event&#39;,
 &#39;prob_word&#39;,
 &#39;whichphrases&#39;,
 &#39;ext_low&#39;,
 &#39;vry_low&#39;,
 &#39;vry_small&#39;,
 &#39;prty_low&#39;,
 &#39;small&#39;,
 &#39;low&#39;,
 &#39;remote&#39;,
 &#39;slight&#39;,
 &#39;medium&#39;,
 &#39;moderate&#39;,
 &#39;good&#39;,
 &#39;high&#39;,
 &#39;large&#39;,
 &#39;prty_high&#39;,
 &#39;vry_high&#39;,
 &#39;sig&#39;,
 &#39;ext_high&#39;,
 &#39;tor_exp_no&#39;,
 &#39;tor_exp_per&#39;,
 &#39;tor_exp_fam&#39;,
 &#39;tor_exp_neighbors&#39;,
 &#39;tor_exp_friends&#39;,
 &#39;svr_exp_no&#39;,
 &#39;svr_exp_per&#39;,
 &#39;svr_exp_fam&#39;,
 &#39;svr_exp_neighbors&#39;,
 &#39;svr_exp_friends&#39;,
 &#39;prep_plan&#39;,
 &#39;prep_kit&#39;,
 &#39;prep_water&#39;,
 &#39;prep_gen&#39;,
 &#39;prep_room&#39;,
 &#39;prep_shelt&#39;,
 &#39;transp_delay&#39;,
 &#39;transp_closures&#39;,
 &#39;transp_accidents&#39;,
 &#39;transp_qual&#39;,
 &#39;transp_spend&#39;,
 &#39;rel_1&#39;,
 &#39;rel_2&#39;,
 &#39;rel_3&#39;,
 &#39;rel_4&#39;,
 &#39;income&#39;,
 &#39;inc_50&#39;,
 &#39;inc_100&#39;,
 &#39;inc_150&#39;,
 &#39;inc_200&#39;,
 &#39;edu&#39;,
 &#39;oft_twit&#39;,
 &#39;oft_FB&#39;,
 &#39;ign_instruct&#39;,
 &#39;is_bluedot&#39;,
 &#39;comments&#39;,
 &#39;begin_datetime&#39;,
 &#39;end_datetime&#39;,
 &#39;begin_date&#39;,
 &#39;end_date&#39;,
 &#39;begin_time&#39;,
 &#39;end_time&#39;,
 &#39;time_taken&#39;,
 &#39;censusproportion&#39;,
 &#39;surveyproportion&#39;,
 &#39;weightfactor&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Is nws_region usefl at all?</span>
<span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;nws_region&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;Central Region&#39;, &#39;Eastern Region&#39;, &#39;Western Region&#39;,
       &#39;Southern Region&#39;, nan], dtype=object)
</pre></div>
</div>
</div>
</div>
<section id="unfortunately-nws-region-only-has-four-regions-nonetheless-it-might-be-useful-at-some-point">
<h5>Unfortunately, ‚Äúnws_region‚Äù only has four regions.  Nonetheless, it might be useful at some point.<a class="headerlink" href="#unfortunately-nws-region-only-has-four-regions-nonetheless-it-might-be-useful-at-some-point" title="Link to this heading">#</a></h5>
</section>
</section>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="break">
<h1>Break<a class="headerlink" href="#break" title="Link to this heading">#</a></h1>
<section id="step-4-merge-with-weather-data">
<h2>Step 4: Merge with Weather Data<a class="headerlink" href="#step-4-merge-with-weather-data" title="Link to this heading">#</a></h2>
<p>First, we demonstrate how the Iowa Mesonet API can be used to collect weather alerts for each survey respondent.  Since calling an API can be slow and depends on internet access, we have already pre-downloaded the weather data needed for this analysis.</p>
<p>Next, we will take this pre-loaded weather data and merge it with the survey responses so that each person‚Äôs record includes both their answers and the relevant weather alerts.</p>
<section id="iowa-mesonet-api-do-not-run-at-this-time">
<h3>Iowa Mesonet API - DO NOT RUN AT THIS TIME<a class="headerlink" href="#iowa-mesonet-api-do-not-run-at-this-time" title="Link to this heading">#</a></h3>
<p>This code is doing alot of work for us, going through the survey data <strong>one person at a time</strong> and asking the Iowa Mesonet API:</p>
<p>‚ÄúGiven this person‚Äôs location and survey date, what watches, warnings, or advisories (WWAs) were active in the few days leading up to that date?‚Äù</p>
<p>Here‚Äôs what happens step by step:</p>
<ol class="arabic simple">
<li><p><strong>Make sure the date is in the right format.</strong><br />
The <code class="docutils literal notranslate"><span class="pre">begin_date</span></code> column is converted into a standard date format so the computer can work with it.</p></li>
<li><p><strong>Prepare a place to store the results.</strong><br />
A new column called <code class="docutils literal notranslate"><span class="pre">wwa_names</span></code> is added to the survey data. This will eventually hold a <em>list</em> of weather alerts for each person.</p></li>
<li><p><strong>Go through each respondent one by one.</strong><br />
For each person, we:</p>
<ul class="simple">
<li><p>Look up their latitude, longitude, and survey date.</p></li>
<li><p>Define a <strong>3-day window</strong> before their survey date (so we catch recent alerts).</p></li>
<li><p>Build a request to the Iowa Mesonet API using their location and dates.</p></li>
</ul>
</li>
<li><p><strong>Ask the API for weather alerts.</strong></p>
<ul class="simple">
<li><p>If the API responds successfully, we pull out the names of any alerts and save them in that person‚Äôs row.</p></li>
<li><p>If something goes wrong (bad connection, no data, etc.), we save an <em>empty list</em> for that person.</p></li>
</ul>
</li>
</ol>
<p>By the end, the survey dataset (<code class="docutils literal notranslate"><span class="pre">df_18</span></code>) has a new column called <code class="docutils literal notranslate"><span class="pre">wwa_names</span></code> that tells us which WWAs (if any) each respondent experienced around the time of their survey.</p>
<p><strong>Analogy:</strong> This is like calling a weather hotline for each person‚Äôs hometown and writing down any recent alerts next to their name in the survey spreadsheet.</p>
<p>Please note the API Endpoint (Rest-like) and the structure of the request for those variables:</p>
<p><a class="reference external" href="https://mesonet.agron.iastate.edu/vtec/json.php?lon=%7Blon%7D&amp;amp;lat=%7Blat%7D&amp;amp;sdate=%7Bstart%7D&amp;amp;edate=%7Bend%7D">https://mesonet.agron.iastate.edu/vtec/json.php?lon={lon}&amp;lat={lat}&amp;sdate={start}&amp;edate={end}</a></p>
<p>Remember, you can always check the API documentation for guidance: the <a class="reference external" href="https://mesonet.agron.iastate.edu/api/">Iowa Mesonet API Guide</a>.</p>
<p><strong>Note:</strong> If you want to try this after the webinar, just remove the first line (‚Äò‚Äô‚Äôpython) and run the cell.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;&#39;&#39;python</span>

<span class="s1"># Make sure begin_date is in datetime format</span>
<span class="s1">df_18[&#39;begin_date&#39;] = pd.to_datetime(df_18[&#39;begin_date&#39;])</span>

<span class="s1"># New column to store list of WWA names</span>
<span class="s1">df_18[&#39;wwa_names&#39;] = None</span>

<span class="s1"># Loop through each respondent</span>
<span class="s1">for idx, row in tqdm(df_18.iterrows(), total=len(df_18)):</span>
<span class="s1">    lat = row[&#39;lat&#39;]</span>
<span class="s1">    lon = row[&#39;lon&#39;]</span>
<span class="s1">    end_date = row[&#39;begin_date&#39;]</span>
<span class="s1">    start_date = end_date - timedelta(days=3)</span>

<span class="s1">    # Build API URL with small buffer</span>
<span class="s1">    url = (</span>
<span class="s1">        f&quot;https://mesonet.agron.iastate.edu/json/vtec_events_bypoint.py&quot;</span>
<span class="s1">        f&quot;?lat=</span><span class="si">{lat}</span><span class="s1">&amp;lon=</span><span class="si">{lon}</span><span class="s1">&quot;</span>
<span class="s1">        f&quot;&amp;sdate={start_date.strftime(&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;)}&amp;edate={end_date.strftime(&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;)}&quot;</span>
<span class="s1">        f&quot;&amp;buffer=0.1&quot;</span>
<span class="s1">    )</span>

<span class="s1">    try:</span>
<span class="s1">        response = requests.get(url)</span>
<span class="s1">        if response.status_code == 200:</span>
<span class="s1">            data = response.json()</span>
<span class="s1">            names = [event[&#39;name&#39;] for event in data.get(&#39;events&#39;, [])]</span>
<span class="s1">            df_18.at[idx, &#39;wwa_names&#39;] = names</span>
<span class="s1">        else:</span>
<span class="s1">            df_18.at[idx, &#39;wwa_names&#39;] = []</span>
<span class="s1">    except Exception as e:</span>
<span class="s1">        print(f&quot;Failed for idx=</span><span class="si">{idx}</span><span class="s1">, lat=</span><span class="si">{lat}</span><span class="s1">, lon=</span><span class="si">{lon}</span><span class="s1">: </span><span class="si">{e}</span><span class="s1">&quot;)</span>
<span class="s1">        df_18.at[idx, &#39;wwa_names&#39;] = []</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>  <span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">14</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="s1">&#39;&#39;&#39;python</span>
<span class="s1">    ^</span>
<span class="ne">SyntaxError</span>: incomplete input
</pre></div>
</div>
</div>
</div>
</section>
<section id="iowa-mesonet-data-joining-the-survey-data-with-weather-alerts">
<h3>Iowa Mesonet Data - Joining the Survey Data with Weather Alerts<a class="headerlink" href="#iowa-mesonet-data-joining-the-survey-data-with-weather-alerts" title="Link to this heading">#</a></h3>
<p>Prior to the webinar, the data we needed was downloaded.  This dataset (‚Äòwwa_by_pid‚Äô) including the respondent identifier (‚Äòp_id‚Äô) and a column with watches, warnings, and advisories (‚Äòwwa_names‚Äô).  At this point, we have two different tables of information:</p>
<ul class="simple">
<li><p><strong>Survey data</strong> (df_18): this has all the responses from people, including their p_id (a unique identifier for each person).</p></li>
<li><p><strong>Weather alerts data</strong> (lk): this has just two columns ‚Äî the same p_id, and the list of watches, warnings, or advisories (wwa_names) that each person experienced.</p></li>
</ul>
<p>We‚Äôre going to merge both tables on p_id, which is basically doing the following:</p>
<p>‚ÄúFor each person in the survey data, look up their matching p_id in the weather file and bring in the weather alerts column (wwa_names).‚Äù</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Read in the saved lookup file</span>
<span class="n">lk</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;data/wwa_by_pid.csv&quot;</span><span class="p">)</span>

<span class="c1"># Merge with the original df_18 on &#39;p_id&#39;</span>
<span class="n">df_18</span> <span class="o">=</span> <span class="n">df_18</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">lk</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;p_id&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_18</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>p_id</th>
      <th>age</th>
      <th>age_group</th>
      <th>gend</th>
      <th>hisp</th>
      <th>race</th>
      <th>state</th>
      <th>zip</th>
      <th>nws_region</th>
      <th>lat</th>
      <th>...</th>
      <th>end_datetime</th>
      <th>begin_date</th>
      <th>end_date</th>
      <th>begin_time</th>
      <th>end_time</th>
      <th>time_taken</th>
      <th>censusproportion</th>
      <th>surveyproportion</th>
      <th>weightfactor</th>
      <th>wwa_names</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>EPO77VBNDHYXC5L4M3</td>
      <td>54</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>4</td>
      <td>Illinois</td>
      <td>60060</td>
      <td>Central Region</td>
      <td>42.200806</td>
      <td>...</td>
      <td>1530900853</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:00:00</td>
      <td>13:14:00</td>
      <td>13</td>
      <td>0.001122</td>
      <td>0.003155</td>
      <td>0.355626</td>
      <td>['Severe Thunderstorm Warning', 'Flood Advisor...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>EPO77VDZDV5LMGD4M9</td>
      <td>66</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Maryland</td>
      <td>21921</td>
      <td>Eastern Region</td>
      <td>39.575394</td>
      <td>...</td>
      <td>1530901159</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:00:00</td>
      <td>13:19:00</td>
      <td>18</td>
      <td>0.027792</td>
      <td>0.032461</td>
      <td>0.856166</td>
      <td>['Severe Thunderstorm Warning', 'Flash Flood W...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>EPO77VFD67MR5R44M7</td>
      <td>54</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>New York</td>
      <td>14420</td>
      <td>Eastern Region</td>
      <td>43.250793</td>
      <td>...</td>
      <td>1530900927</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:00:00</td>
      <td>13:15:00</td>
      <td>14</td>
      <td>0.030340</td>
      <td>0.057592</td>
      <td>0.526809</td>
      <td>['Heat Advisory', 'Heat Advisory', 'Heat Advis...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>EPO77VFJ2CJKML44M9</td>
      <td>56</td>
      <td>5</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Utah</td>
      <td>84097</td>
      <td>Western Region</td>
      <td>40.296799</td>
      <td>...</td>
      <td>1530900878</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:00:00</td>
      <td>13:14:00</td>
      <td>13</td>
      <td>0.024319</td>
      <td>0.034826</td>
      <td>0.698300</td>
      <td>['Red Flag Warning', 'Fire Weather Watch']</td>
    </tr>
    <tr>
      <th>4</th>
      <td>EPO77VFD4CZHV2M4M0</td>
      <td>66</td>
      <td>6</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>California</td>
      <td>90620</td>
      <td>Western Region</td>
      <td>33.875504</td>
      <td>...</td>
      <td>1530900993</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:00:00</td>
      <td>13:16:00</td>
      <td>15</td>
      <td>0.020574</td>
      <td>0.023217</td>
      <td>0.886161</td>
      <td>['Beach Hazard Statement', 'High Surf Advisory']</td>
    </tr>
    <tr>
      <th>5</th>
      <td>EPO77VFJNC6WZGC4M2</td>
      <td>62</td>
      <td>5</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Colorado</td>
      <td>80477</td>
      <td>Central Region</td>
      <td>40.626495</td>
      <td>...</td>
      <td>1530901243</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:00:00</td>
      <td>13:20:00</td>
      <td>19</td>
      <td>0.035628</td>
      <td>0.020505</td>
      <td>1.737527</td>
      <td>[]</td>
    </tr>
    <tr>
      <th>6</th>
      <td>EPO77VFK7YV6PSP4M2</td>
      <td>63</td>
      <td>5</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>California</td>
      <td>92101</td>
      <td>Western Region</td>
      <td>32.719101</td>
      <td>...</td>
      <td>1530900818</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:13:00</td>
      <td>12</td>
      <td>0.023296</td>
      <td>0.031509</td>
      <td>0.739344</td>
      <td>['High Surf Advisory', 'Beach Hazard Statement']</td>
    </tr>
    <tr>
      <th>7</th>
      <td>EPO77VFJCRK7C6D4M1</td>
      <td>65</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Missouri</td>
      <td>65653</td>
      <td>Central Region</td>
      <td>38.914200</td>
      <td>...</td>
      <td>1530901274</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:21:00</td>
      <td>20</td>
      <td>0.030293</td>
      <td>0.028391</td>
      <td>1.066993</td>
      <td>['Red Flag Warning', 'Red Flag Warning', 'Red ...</td>
    </tr>
    <tr>
      <th>8</th>
      <td>EPO77VFNLZ7JM894M7</td>
      <td>41</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>5</td>
      <td>Oklahoma</td>
      <td>73135</td>
      <td>Southern Region</td>
      <td>35.515106</td>
      <td>...</td>
      <td>1530901966</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:32:00</td>
      <td>31</td>
      <td>0.000035</td>
      <td>0.002503</td>
      <td>0.013983</td>
      <td>['Heat Advisory', 'Heat Advisory']</td>
    </tr>
    <tr>
      <th>9</th>
      <td>EPO77VFPD6RK7Q34M6</td>
      <td>51</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Pennsylvania</td>
      <td>15219</td>
      <td>Eastern Region</td>
      <td>39.739197</td>
      <td>...</td>
      <td>1530900708</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:11:00</td>
      <td>10</td>
      <td>0.030340</td>
      <td>0.057592</td>
      <td>0.526809</td>
      <td>['Severe Thunderstorm Warning', 'Severe Thunde...</td>
    </tr>
    <tr>
      <th>10</th>
      <td>EPO77VFMXNK3KV54M1</td>
      <td>61</td>
      <td>5</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Oregon</td>
      <td>97202</td>
      <td>Western Region</td>
      <td>45.469101</td>
      <td>...</td>
      <td>1530900825</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:13:00</td>
      <td>12</td>
      <td>0.024533</td>
      <td>0.016584</td>
      <td>1.479317</td>
      <td>['Red Flag Warning']</td>
    </tr>
    <tr>
      <th>11</th>
      <td>EPO77VDM9WRF6HJ4M9</td>
      <td>61</td>
      <td>5</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>Connecticut</td>
      <td>6801</td>
      <td>Eastern Region</td>
      <td>40.730804</td>
      <td>...</td>
      <td>1530901292</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:21:00</td>
      <td>20</td>
      <td>0.001841</td>
      <td>0.002094</td>
      <td>0.879179</td>
      <td>['Flash Flood Warning', 'Severe Thunderstorm W...</td>
    </tr>
    <tr>
      <th>12</th>
      <td>EPO77VFSLZ87WK44M4</td>
      <td>56</td>
      <td>5</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Illinois</td>
      <td>60016</td>
      <td>Central Region</td>
      <td>41.863205</td>
      <td>...</td>
      <td>1530900864</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:14:00</td>
      <td>13</td>
      <td>0.036930</td>
      <td>0.039432</td>
      <td>0.936549</td>
      <td>['Severe Thunderstorm Warning', 'Marine Warnin...</td>
    </tr>
    <tr>
      <th>13</th>
      <td>EPO77VFJSVTCN6M4M6</td>
      <td>82</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Kentucky</td>
      <td>40511</td>
      <td>Central Region</td>
      <td>38.004700</td>
      <td>...</td>
      <td>1530901499</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:24:00</td>
      <td>23</td>
      <td>0.012259</td>
      <td>0.003155</td>
      <td>3.885578</td>
      <td>['Heat Advisory', 'Heat Advisory']</td>
    </tr>
    <tr>
      <th>14</th>
      <td>EPO77VFM7H8D7RJ4M7</td>
      <td>54</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>New York</td>
      <td>14086</td>
      <td>Eastern Region</td>
      <td>42.986404</td>
      <td>...</td>
      <td>1530901126</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:18:00</td>
      <td>17</td>
      <td>0.030340</td>
      <td>0.057592</td>
      <td>0.526809</td>
      <td>['Heat Advisory', 'Heat Advisory', 'Severe Thu...</td>
    </tr>
    <tr>
      <th>15</th>
      <td>EPO77VFDTQ6LF744M1</td>
      <td>38</td>
      <td>3</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>California</td>
      <td>94589</td>
      <td>Western Region</td>
      <td>32.852295</td>
      <td>...</td>
      <td>1530902365</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:39:00</td>
      <td>37</td>
      <td>0.021046</td>
      <td>0.051410</td>
      <td>0.409376</td>
      <td>[]</td>
    </tr>
    <tr>
      <th>16</th>
      <td>EPO77VFL36WTT2T4M8</td>
      <td>31</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>New York</td>
      <td>11213</td>
      <td>Eastern Region</td>
      <td>40.751694</td>
      <td>...</td>
      <td>1530901409</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:23:00</td>
      <td>21</td>
      <td>0.025745</td>
      <td>0.042932</td>
      <td>0.599669</td>
      <td>['Flash Flood Warning', 'Severe Thunderstorm W...</td>
    </tr>
    <tr>
      <th>17</th>
      <td>EPO77VFXLZ8X6TX4M0</td>
      <td>61</td>
      <td>5</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>North Carolina</td>
      <td>27376</td>
      <td>Eastern Region</td>
      <td>35.254303</td>
      <td>...</td>
      <td>1530900906</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:15:00</td>
      <td>13</td>
      <td>0.029862</td>
      <td>0.049215</td>
      <td>0.606766</td>
      <td>[]</td>
    </tr>
    <tr>
      <th>18</th>
      <td>EPO77VFCQLYRGXG4M6</td>
      <td>63</td>
      <td>5</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>North Carolina</td>
      <td>28585</td>
      <td>Eastern Region</td>
      <td>35.444794</td>
      <td>...</td>
      <td>1530901036</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:17:00</td>
      <td>15</td>
      <td>0.029862</td>
      <td>0.049215</td>
      <td>0.606766</td>
      <td>[]</td>
    </tr>
    <tr>
      <th>19</th>
      <td>EPO77VFDG4RWYRM4M8</td>
      <td>27</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>California</td>
      <td>95113</td>
      <td>Western Region</td>
      <td>40.054794</td>
      <td>...</td>
      <td>1530902302</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:38:00</td>
      <td>36</td>
      <td>0.021113</td>
      <td>0.026534</td>
      <td>0.795696</td>
      <td>['Excessive Heat Warning', 'Flash Flood Warnin...</td>
    </tr>
    <tr>
      <th>20</th>
      <td>EPO77VG3K5ND6G94M9</td>
      <td>69</td>
      <td>6</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Kansas</td>
      <td>66213</td>
      <td>Central Region</td>
      <td>38.964294</td>
      <td>...</td>
      <td>1530901535</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:01:00</td>
      <td>13:25:00</td>
      <td>23</td>
      <td>0.028358</td>
      <td>0.031546</td>
      <td>0.898941</td>
      <td>['Heat Advisory', 'Heat Advisory']</td>
    </tr>
    <tr>
      <th>21</th>
      <td>EPO77VG5L5X2KYV4M4</td>
      <td>24</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Pennsylvania</td>
      <td>15001</td>
      <td>Eastern Region</td>
      <td>40.589005</td>
      <td>...</td>
      <td>1530900868</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:14:00</td>
      <td>12</td>
      <td>0.025022</td>
      <td>0.059686</td>
      <td>0.419227</td>
      <td>['Heat Advisory', 'Heat Advisory', 'Severe Thu...</td>
    </tr>
    <tr>
      <th>22</th>
      <td>EPO77VG46YPNLMT4M2</td>
      <td>52</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Michigan</td>
      <td>49506</td>
      <td>Central Region</td>
      <td>42.929398</td>
      <td>...</td>
      <td>1530901263</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:21:00</td>
      <td>18</td>
      <td>0.033726</td>
      <td>0.052050</td>
      <td>0.647954</td>
      <td>['Heat Advisory']</td>
    </tr>
    <tr>
      <th>23</th>
      <td>EPO77VG5B8RVQYC4M5</td>
      <td>52</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Delaware</td>
      <td>19966</td>
      <td>Eastern Region</td>
      <td>38.552795</td>
      <td>...</td>
      <td>1530901213</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:20:00</td>
      <td>18</td>
      <td>0.031230</td>
      <td>0.023037</td>
      <td>1.355645</td>
      <td>['Heat Advisory']</td>
    </tr>
    <tr>
      <th>24</th>
      <td>EPO77VGR42HQ9Y64M7</td>
      <td>29</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Ohio</td>
      <td>45140</td>
      <td>Eastern Region</td>
      <td>40.760803</td>
      <td>...</td>
      <td>1530900939</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:15:00</td>
      <td>13</td>
      <td>0.026304</td>
      <td>0.024084</td>
      <td>1.092177</td>
      <td>['Red Flag Warning', 'Fire Weather Watch']</td>
    </tr>
    <tr>
      <th>25</th>
      <td>EPO77VFRRGFSD684M3</td>
      <td>64</td>
      <td>5</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Ohio</td>
      <td>45205</td>
      <td>Eastern Region</td>
      <td>39.111099</td>
      <td>...</td>
      <td>1530901562</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:26:00</td>
      <td>23</td>
      <td>0.029862</td>
      <td>0.049215</td>
      <td>0.606766</td>
      <td>['Excessive Heat Watch', 'Excessive Heat Watch...</td>
    </tr>
    <tr>
      <th>26</th>
      <td>EPO77VFX83CSLNW4M7</td>
      <td>67</td>
      <td>6</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Pennsylvania</td>
      <td>17967</td>
      <td>Eastern Region</td>
      <td>41.315308</td>
      <td>...</td>
      <td>1530901352</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:22:00</td>
      <td>20</td>
      <td>0.025281</td>
      <td>0.026178</td>
      <td>0.965735</td>
      <td>['Flood Advisory', 'Flash Flood Watch', 'Flash...</td>
    </tr>
    <tr>
      <th>27</th>
      <td>EPO77VGR2JM8FDF4M6</td>
      <td>73</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>California</td>
      <td>90292</td>
      <td>Western Region</td>
      <td>34.052200</td>
      <td>...</td>
      <td>1530901078</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:17:00</td>
      <td>15</td>
      <td>0.017828</td>
      <td>0.014925</td>
      <td>1.194506</td>
      <td>['Beach Hazard Statement', 'High Surf Advisory']</td>
    </tr>
    <tr>
      <th>28</th>
      <td>EPO77VGSVYZ5WSK4M1</td>
      <td>62</td>
      <td>5</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Louisiana</td>
      <td>70118</td>
      <td>Southern Region</td>
      <td>29.983795</td>
      <td>...</td>
      <td>1530901316</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:21:00</td>
      <td>19</td>
      <td>0.024019</td>
      <td>0.035044</td>
      <td>0.685396</td>
      <td>['Flood Advisory', 'Flood Advisory', 'Flash Fl...</td>
    </tr>
    <tr>
      <th>29</th>
      <td>EPO77VFTCP63VTB4M8</td>
      <td>70</td>
      <td>6</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Georgia</td>
      <td>31029</td>
      <td>Southern Region</td>
      <td>33.032501</td>
      <td>...</td>
      <td>1530901515</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:25:00</td>
      <td>22</td>
      <td>0.017905</td>
      <td>0.027534</td>
      <td>0.650287</td>
      <td>[]</td>
    </tr>
    <tr>
      <th>30</th>
      <td>EPO77VFYT57PW944M7</td>
      <td>76</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Florida</td>
      <td>33765</td>
      <td>Southern Region</td>
      <td>27.975693</td>
      <td>...</td>
      <td>1530901388</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:23:00</td>
      <td>20</td>
      <td>0.014287</td>
      <td>0.011264</td>
      <td>1.268377</td>
      <td>['Marine Warning']</td>
    </tr>
    <tr>
      <th>31</th>
      <td>EPO77VGSXTMF7J24M8</td>
      <td>56</td>
      <td>5</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Illinois</td>
      <td>62234</td>
      <td>Central Region</td>
      <td>38.754898</td>
      <td>...</td>
      <td>1530900856</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:14:00</td>
      <td>11</td>
      <td>0.038058</td>
      <td>0.022082</td>
      <td>1.723485</td>
      <td>['Heat Advisory', 'Heat Advisory']</td>
    </tr>
    <tr>
      <th>32</th>
      <td>EPO77VFW6B63BX54M5</td>
      <td>68</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Arkansas</td>
      <td>72088</td>
      <td>Southern Region</td>
      <td>35.599106</td>
      <td>...</td>
      <td>1530901660</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:27:00</td>
      <td>25</td>
      <td>0.023903</td>
      <td>0.027534</td>
      <td>0.868127</td>
      <td>['Heat Advisory']</td>
    </tr>
    <tr>
      <th>33</th>
      <td>EPO77VGTHB5YGFC4M3</td>
      <td>67</td>
      <td>6</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Florida</td>
      <td>32162</td>
      <td>Southern Region</td>
      <td>28.940002</td>
      <td>...</td>
      <td>1530901551</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:25:00</td>
      <td>23</td>
      <td>0.021583</td>
      <td>0.028786</td>
      <td>0.749774</td>
      <td>[]</td>
    </tr>
    <tr>
      <th>34</th>
      <td>EPO77VGT98N2X4B4M8</td>
      <td>55</td>
      <td>5</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>New York</td>
      <td>14626</td>
      <td>Eastern Region</td>
      <td>43.126694</td>
      <td>...</td>
      <td>1530901151</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:19:00</td>
      <td>16</td>
      <td>0.002550</td>
      <td>0.005236</td>
      <td>0.487013</td>
      <td>['Heat Advisory', 'Heat Advisory', 'Severe Thu...</td>
    </tr>
    <tr>
      <th>35</th>
      <td>EPO77VG2R4QFJN64M9</td>
      <td>79</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Florida</td>
      <td>34748</td>
      <td>Southern Region</td>
      <td>46.100006</td>
      <td>...</td>
      <td>1530901886</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:31:00</td>
      <td>28</td>
      <td>0.014287</td>
      <td>0.011264</td>
      <td>1.268377</td>
      <td>[]</td>
    </tr>
    <tr>
      <th>36</th>
      <td>EPO77VFQ476VCQT4M1</td>
      <td>60</td>
      <td>5</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Connecticut</td>
      <td>6074</td>
      <td>Eastern Region</td>
      <td>41.734299</td>
      <td>...</td>
      <td>1530901470</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:24:00</td>
      <td>21</td>
      <td>0.031836</td>
      <td>0.023037</td>
      <td>1.381951</td>
      <td>['Flash Flood Warning']</td>
    </tr>
    <tr>
      <th>37</th>
      <td>EPO77VGTBFRRDKC4M4</td>
      <td>60</td>
      <td>5</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>Wisconsin</td>
      <td>54952</td>
      <td>Central Region</td>
      <td>44.184296</td>
      <td>...</td>
      <td>1530901619</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:26:00</td>
      <td>24</td>
      <td>0.001629</td>
      <td>0.004732</td>
      <td>0.344252</td>
      <td>['Severe Thunderstorm Warning']</td>
    </tr>
    <tr>
      <th>38</th>
      <td>EPO77VGRQJS89ZZ4M4</td>
      <td>67</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>Oregon</td>
      <td>97219</td>
      <td>Western Region</td>
      <td>45.450897</td>
      <td>...</td>
      <td>1530902046</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:34:00</td>
      <td>31</td>
      <td>0.001432</td>
      <td>0.006633</td>
      <td>0.215890</td>
      <td>['Red Flag Warning']</td>
    </tr>
    <tr>
      <th>39</th>
      <td>EPO77VGW88F3SVK4M1</td>
      <td>46</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Illinois</td>
      <td>60625</td>
      <td>Central Region</td>
      <td>41.760605</td>
      <td>...</td>
      <td>1530902760</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:46:00</td>
      <td>43</td>
      <td>0.031217</td>
      <td>0.037855</td>
      <td>0.824647</td>
      <td>['Heat Advisory', 'Heat Advisory', 'Heat Advis...</td>
    </tr>
    <tr>
      <th>40</th>
      <td>EPO77VFXKN8TJC24M7</td>
      <td>28</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>California</td>
      <td>91765</td>
      <td>Western Region</td>
      <td>34.049393</td>
      <td>...</td>
      <td>1530900935</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:15:00</td>
      <td>12</td>
      <td>0.005926</td>
      <td>0.003317</td>
      <td>1.786554</td>
      <td>['Beach Hazard Statement', 'High Surf Advisory']</td>
    </tr>
    <tr>
      <th>41</th>
      <td>EPO77VHJRVX6K7G4M6</td>
      <td>26</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>New York</td>
      <td>13815</td>
      <td>Eastern Region</td>
      <td>42.545197</td>
      <td>...</td>
      <td>1530900816</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:02:00</td>
      <td>13:13:00</td>
      <td>10</td>
      <td>0.027041</td>
      <td>0.019895</td>
      <td>1.359186</td>
      <td>['Heat Advisory']</td>
    </tr>
    <tr>
      <th>42</th>
      <td>EPO77VGSFPTMDQG4M0</td>
      <td>64</td>
      <td>5</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Pennsylvania</td>
      <td>18041</td>
      <td>Eastern Region</td>
      <td>40.518906</td>
      <td>...</td>
      <td>1530901500</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:03:00</td>
      <td>13:25:00</td>
      <td>21</td>
      <td>0.031836</td>
      <td>0.023037</td>
      <td>1.381951</td>
      <td>['Flash Flood Warning', 'Flood Advisory', 'Flo...</td>
    </tr>
    <tr>
      <th>43</th>
      <td>EPO77VGTNP6C5GX4M6</td>
      <td>41</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Connecticut</td>
      <td>6606</td>
      <td>Eastern Region</td>
      <td>37.751007</td>
      <td>...</td>
      <td>1530901511</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:03:00</td>
      <td>13:25:00</td>
      <td>22</td>
      <td>0.023556</td>
      <td>0.020942</td>
      <td>1.124821</td>
      <td>['Heat Advisory']</td>
    </tr>
    <tr>
      <th>44</th>
      <td>EPO77VFD885DNJG4M2</td>
      <td>66</td>
      <td>6</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>New York</td>
      <td>11432</td>
      <td>Eastern Region</td>
      <td>40.714798</td>
      <td>...</td>
      <td>1530900952</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:03:00</td>
      <td>13:15:00</td>
      <td>12</td>
      <td>0.025281</td>
      <td>0.026178</td>
      <td>0.965735</td>
      <td>[]</td>
    </tr>
    <tr>
      <th>45</th>
      <td>EPO77VFMZP2Q3MH4M5</td>
      <td>32</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>California</td>
      <td>94539</td>
      <td>Western Region</td>
      <td>32.638794</td>
      <td>...</td>
      <td>1530901821</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:03:00</td>
      <td>13:30:00</td>
      <td>26</td>
      <td>0.020491</td>
      <td>0.033167</td>
      <td>0.617813</td>
      <td>[]</td>
    </tr>
    <tr>
      <th>46</th>
      <td>EPO77VGS3Y378ZG4M2</td>
      <td>68</td>
      <td>6</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>New York</td>
      <td>14304</td>
      <td>Eastern Region</td>
      <td>43.101700</td>
      <td>...</td>
      <td>1530901244</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:04:00</td>
      <td>13:20:00</td>
      <td>16</td>
      <td>0.025281</td>
      <td>0.026178</td>
      <td>0.965735</td>
      <td>['Heat Advisory', 'Heat Advisory', 'Severe Thu...</td>
    </tr>
    <tr>
      <th>47</th>
      <td>EPO77VHLKNK7XYY4M3</td>
      <td>33</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Wisconsin</td>
      <td>54952</td>
      <td>Central Region</td>
      <td>40.714294</td>
      <td>...</td>
      <td>1530901108</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:04:00</td>
      <td>13:18:00</td>
      <td>14</td>
      <td>0.031046</td>
      <td>0.042587</td>
      <td>0.729002</td>
      <td>['Flash Flood Warning', 'Severe Thunderstorm W...</td>
    </tr>
    <tr>
      <th>48</th>
      <td>EPO77VHYHDSFWY44M7</td>
      <td>30</td>
      <td>2</td>
      <td>0</td>
      <td>1</td>
      <td>2</td>
      <td>Illinois</td>
      <td>60647</td>
      <td>Central Region</td>
      <td>41.920593</td>
      <td>...</td>
      <td>1530900920</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:04:00</td>
      <td>13:15:00</td>
      <td>11</td>
      <td>0.000175</td>
      <td>0.001577</td>
      <td>0.110970</td>
      <td>['Severe Thunderstorm Warning', 'Flood Advisor...</td>
    </tr>
    <tr>
      <th>49</th>
      <td>EPO77VFLJST5R8N4M6</td>
      <td>36</td>
      <td>3</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Virginia</td>
      <td>20147</td>
      <td>Eastern Region</td>
      <td>39.048096</td>
      <td>...</td>
      <td>1530901274</td>
      <td>2018-07-06</td>
      <td>2018-07-06</td>
      <td>13:04:00</td>
      <td>13:21:00</td>
      <td>16</td>
      <td>0.024471</td>
      <td>0.043979</td>
      <td>0.556425</td>
      <td>['Heat Advisory', 'Heat Advisory', 'Heat Advis...</td>
    </tr>
  </tbody>
</table>
<p>50 rows √ó 224 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#We use `ast` to convert the `wwa_names` column from text back into real Python lists so we can work with them.  </span>
<span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;wwa_names&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;wwa_names&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">x</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#let&#39;s examine what we just collected.  We use the attribute &quot;dropna&quot; to make sure that there are no rows that are empty (i.e., we didn&#39;t screw something up).</span>
<span class="n">df_18</span><span class="p">[[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="s1">&#39;begin_date&#39;</span><span class="p">,</span> <span class="s1">&#39;wwa_names&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>lat</th>
      <th>lon</th>
      <th>begin_date</th>
      <th>wwa_names</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>42.200806</td>
      <td>-88.042999</td>
      <td>2018-07-06</td>
      <td>[Severe Thunderstorm Warning, Flood Advisory, ...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>39.575394</td>
      <td>-75.926903</td>
      <td>2018-07-06</td>
      <td>[Severe Thunderstorm Warning, Flash Flood Warn...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>43.250793</td>
      <td>-77.924599</td>
      <td>2018-07-06</td>
      <td>[Heat Advisory, Heat Advisory, Heat Advisory, ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>40.296799</td>
      <td>-111.676102</td>
      <td>2018-07-06</td>
      <td>[Red Flag Warning, Fire Weather Watch]</td>
    </tr>
    <tr>
      <th>4</th>
      <td>33.875504</td>
      <td>-117.993500</td>
      <td>2018-07-06</td>
      <td>[Beach Hazard Statement, High Surf Advisory]</td>
    </tr>
    <tr>
      <th>5</th>
      <td>40.626495</td>
      <td>-106.927200</td>
      <td>2018-07-06</td>
      <td>[]</td>
    </tr>
    <tr>
      <th>6</th>
      <td>32.719101</td>
      <td>-117.160706</td>
      <td>2018-07-06</td>
      <td>[High Surf Advisory, Beach Hazard Statement]</td>
    </tr>
    <tr>
      <th>7</th>
      <td>38.914200</td>
      <td>-104.774902</td>
      <td>2018-07-06</td>
      <td>[Red Flag Warning, Red Flag Warning, Red Flag ...</td>
    </tr>
    <tr>
      <th>8</th>
      <td>35.515106</td>
      <td>-97.574097</td>
      <td>2018-07-06</td>
      <td>[Heat Advisory, Heat Advisory]</td>
    </tr>
    <tr>
      <th>9</th>
      <td>39.739197</td>
      <td>-104.984703</td>
      <td>2018-07-06</td>
      <td>[Severe Thunderstorm Warning, Severe Thunderst...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#let&#39;s make sure we have the same number of row that we started with</span>
<span class="n">df_18</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(3000, 224)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#how many respondents experienced watches/warnings/advisories?</span>
<span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;wwa_names&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1713
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#who received more than two?</span>
<span class="n">df_18</span><span class="p">[</span>
    <span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;wwa_names&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="s1">&#39;begin_date&#39;</span><span class="p">,</span> <span class="s1">&#39;wwa_names&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>lat</th>
      <th>lon</th>
      <th>begin_date</th>
      <th>wwa_names</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>42.200806</td>
      <td>-88.042999</td>
      <td>2018-07-06</td>
      <td>[Severe Thunderstorm Warning, Flood Advisory, ...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>39.575394</td>
      <td>-75.926903</td>
      <td>2018-07-06</td>
      <td>[Severe Thunderstorm Warning, Flash Flood Warn...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>43.250793</td>
      <td>-77.924599</td>
      <td>2018-07-06</td>
      <td>[Heat Advisory, Heat Advisory, Heat Advisory, ...</td>
    </tr>
    <tr>
      <th>7</th>
      <td>38.914200</td>
      <td>-104.774902</td>
      <td>2018-07-06</td>
      <td>[Red Flag Warning, Red Flag Warning, Red Flag ...</td>
    </tr>
    <tr>
      <th>9</th>
      <td>39.739197</td>
      <td>-104.984703</td>
      <td>2018-07-06</td>
      <td>[Severe Thunderstorm Warning, Severe Thunderst...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2988</th>
      <td>33.448807</td>
      <td>-111.801399</td>
      <td>2018-07-09</td>
      <td>[Dust Storm Advisory, Dust Storm Advisory, Dus...</td>
    </tr>
    <tr>
      <th>2989</th>
      <td>40.896301</td>
      <td>-74.151299</td>
      <td>2018-07-09</td>
      <td>[Flash Flood Watch, Flash Flood Watch, Flash F...</td>
    </tr>
    <tr>
      <th>2993</th>
      <td>40.776901</td>
      <td>-73.981300</td>
      <td>2018-07-09</td>
      <td>[Flash Flood Watch, Flash Flood Watch, Flash F...</td>
    </tr>
    <tr>
      <th>2994</th>
      <td>40.714294</td>
      <td>-74.005997</td>
      <td>2018-07-09</td>
      <td>[Flash Flood Watch, Flash Flood Watch, Flash F...</td>
    </tr>
    <tr>
      <th>2996</th>
      <td>41.604401</td>
      <td>-87.253502</td>
      <td>2018-07-09</td>
      <td>[Small Craft Advisory, Beach Hazard Statement,...</td>
    </tr>
  </tbody>
</table>
<p>1098 rows √ó 4 columns</p>
</div></div></div>
</div>
</section>
<section id="exporting-the-data-for-use-outside-jupyter">
<h3>Exporting the Data for Use Outside Jupyter<a class="headerlink" href="#exporting-the-data-for-use-outside-jupyter" title="Link to this heading">#</a></h3>
<p>Now that we have a merged dataframe (<code class="docutils literal notranslate"><span class="pre">df_18</span></code>) with both survey responses and weather alerts, it is possible to save and download in different formats for use in other tools and workflows.  We won‚Äôt run them here, but I‚Äôll provide the code snippets to view.</p>
<ul class="simple">
<li><p><strong>CSV (general use, Excel, R, SAS, SPSS, STATA.)</strong></p></li>
</ul>
<p>df_18.to_csv(‚Äúsurvey_weather.csv‚Äù, index=False)</p>
<ul class="simple">
<li><p><strong>R (as .RDS file for use with readRDS() in R)</strong></p></li>
</ul>
<p>df_18.to_pickle(‚Äúsurvey_weather.rds‚Äù)</p>
</section>
<section id="examining-the-data">
<h3>Examining the Data<a class="headerlink" href="#examining-the-data" title="Link to this heading">#</a></h3>
<p>Let‚Äôs say we want to continue in Jupyter to quickly visualize and analyze the data.  Below we will look at the following:</p>
<ul class="simple">
<li><p><em><strong>Quick Visualizations</strong></em></p></li>
<li><p><em><strong>Visualizing WWAs by Survey Responses</strong></em></p></li>
<li><p><em><strong>Quick Statistical Analyses</strong></em></p></li>
<li><p><em><strong>A Bit More Involved Analysis</strong></em></p></li>
</ul>
<section id="quick-visualizations">
<h4>Quick visualizations<a class="headerlink" href="#quick-visualizations" title="Link to this heading">#</a></h4>
<p>In this step, we will be developing the following visualizations.</p>
<ol class="arabic simple">
<li><p>A geomap of survey respondents by number of watches and warnings 3 days prior to the survey.</p></li>
<li><p>A bar chart showing frequency of types of watches and warnings.</p></li>
<li><p>A line graph showing frequency of types of watches and warning over time.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Step 1: Ensure lat/lon are float (just in case)</span>
<span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
<span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>

<span class="c1"># Step 2: Create geometry from lat/lon</span>
<span class="n">geometry</span> <span class="o">=</span> <span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span> <span class="k">for</span> <span class="n">xy</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">],</span> <span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">])]</span>
<span class="n">gdf_18</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">df_18</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>

<span class="c1"># Step 3: Count WWAs</span>
<span class="n">gdf_18</span><span class="p">[</span><span class="s1">&#39;wwa_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf_18</span><span class="p">[</span><span class="s1">&#39;wwa_names&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># Step 4: Plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">gdf_18</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;wwa_count&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;OrRd&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Survey Respondents by Number of WWAs (3 Days Prior)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/693fc5e6391a56558a66a2686ba98f5591e0f75283c2bd01986c39c038f09156.png" src="../_images/693fc5e6391a56558a66a2686ba98f5591e0f75283c2bd01986c39c038f09156.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Flatten and count</span>
<span class="n">all_names</span> <span class="o">=</span> <span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;wwa_names&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
<span class="n">top_names</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">all_names</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># Plot</span>
<span class="n">names</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">top_names</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">names</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">counts</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Top 10 Most Frequent WWAs&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Number of Respondents Exposed&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/5757a9ae7e5aae7cbe60383a03e9ed46b46f8233ebcfcf3bf7bdadf52006dda4.png" src="../_images/5757a9ae7e5aae7cbe60383a03e9ed46b46f8233ebcfcf3bf7bdadf52006dda4.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Count WWAs per date</span>
<span class="n">timeline</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df_18</span><span class="p">[[</span><span class="s1">&#39;begin_date&#39;</span><span class="p">,</span> <span class="s1">&#39;wwa_names&#39;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">wwa_count</span><span class="o">=</span><span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;wwa_names&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">len</span><span class="p">))</span>
    <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;begin_date&#39;</span><span class="p">)[</span><span class="s1">&#39;wwa_count&#39;</span><span class="p">]</span>
    <span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="p">)</span>

<span class="c1"># Plot</span>
<span class="n">timeline</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Total WWAs by Survey Date&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Total Warnings/Watch Events&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Survey Date&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/cc337a3624e90b629752461bbb38a5416049b2e59fcfd0021bfed060cf027cf5.png" src="../_images/cc337a3624e90b629752461bbb38a5416049b2e59fcfd0021bfed060cf027cf5.png" />
</div>
</div>
</section>
</section>
<section id="visualizing-wwwas-by-survey-reponses">
<h3>Visualizing WWWAs by Survey Reponses<a class="headerlink" href="#visualizing-wwwas-by-survey-reponses" title="Link to this heading">#</a></h3>
<p>For a next step, we might do some quick analyses/visualizations of WWAs by survey response.  Perhaps even make an interactive version with a dropdown of survey responses that a user can play with?</p>
<p>Let‚Äôs say we want to examine how the presence of recent NWS advisories (3 days prior to taking the survey) correlates with survey respondents‚Äô perceived risk of that hazard.  How can we do that?</p>
<p>Step 1.  Create two groups of respondents, those experienced a WWA prior to the survey and those who did not.
Step 2.  Extract risk perception scores for a hazard (For risk_flood: 1-No risk, 2-Low Risk‚Ä¶..5-Extreme risk)
Step 3.  Create comparative visualizations</p>
<p>For these visualizations, we will focus on exposure to flood watches and warnings.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># --- Prep: robust WWA exposure + ordered risk labels ---</span>

<span class="c1"># 1) robust flood_wwa_exposure (handles NaN/non-lists)</span>
<span class="n">flood_wwa_keywords</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Flood Advisory&#39;</span><span class="p">,</span> <span class="s1">&#39;Flood Warning&#39;</span><span class="p">,</span> <span class="s1">&#39;Flash Flood Warning&#39;</span><span class="p">,</span> <span class="s1">&#39;Flash Flood Watch&#39;</span><span class="p">,</span> <span class="s1">&#39;Flood Watch&#39;</span><span class="p">]</span>

<span class="k">def</span><span class="w"> </span><span class="nf">has_flood_wwa</span><span class="p">(</span><span class="n">wwas</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wwas</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">set</span><span class="p">)):</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">k</span> <span class="ow">in</span> <span class="n">wwas</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">flood_wwa_keywords</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">False</span>

<span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;flood_wwa_exposure&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;wwa_names&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">has_flood_wwa</span><span class="p">)</span>

<span class="c1"># 2) numeric -&gt; labeled flood risk (ordered categorical)</span>
<span class="n">label_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;No risk&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;Low risk&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;Moderate risk&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;High risk&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="s1">&#39;Extreme risk&#39;</span><span class="p">}</span>
<span class="n">ordered_risk_labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">label_map</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

<span class="c1"># Coerce to numeric, map to labels, and set categorical order</span>
<span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;risk_flood_num&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df_18</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;risk_flood&#39;</span><span class="p">),</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
<span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;risk_flood_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span>
    <span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;risk_flood_num&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">label_map</span><span class="p">),</span>
    <span class="n">categories</span><span class="o">=</span><span class="n">ordered_risk_labels</span><span class="p">,</span>
    <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df_18</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;risk_flood_label&#39;</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;flood_wwa_exposure&#39;</span><span class="p">,</span>
    <span class="n">order</span><span class="o">=</span><span class="n">ordered_risk_labels</span><span class="p">,</span>
    <span class="n">hue_order</span><span class="o">=</span><span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Perceived Flood Risk&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Number of Respondents&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Perceived Flood Risk by Exposure to Flood-Related WWAs&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;WWA Exposure&quot;</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;No&quot;</span><span class="p">,</span> <span class="s2">&quot;Yes&quot;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/e2c1d7f86d1453281c727fb27bad6b60cc9446d1d0dec547859c2c2b21748d70.png" src="../_images/e2c1d7f86d1453281c727fb27bad6b60cc9446d1d0dec547859c2c2b21748d70.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># crosstab -&gt; proportions by exposure</span>
<span class="n">crosstab</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span>
    <span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;flood_wwa_exposure&#39;</span><span class="p">],</span>
    <span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;risk_flood_label&#39;</span><span class="p">],</span>
    <span class="n">normalize</span><span class="o">=</span><span class="s1">&#39;index&#39;</span>
<span class="p">)</span>

<span class="c1"># ensure consistent order of rows/columns even if some levels are missing</span>
<span class="n">crosstab</span> <span class="o">=</span> <span class="n">crosstab</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">ordered_risk_labels</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">crosstab</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span>
    <span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Flood Risk Perception by WWA Exposure (Proportions)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Perceived Flood Risk&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Proportion of Respondents&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Exposed to Flood WWA&#39;</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;Yes&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/0570f31e3501b383475adcda9bb08623ee94d744dbe7be0fd7e7edfd174c4bfe.png" src="../_images/0570f31e3501b383475adcda9bb08623ee94d744dbe7be0fd7e7edfd174c4bfe.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># I don&#39;t personally like violin plots, but let&#39;s take a look</span>
<span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_18</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;flood_wwa_exposure&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;risk_flood&#39;</span><span class="p">,</span> <span class="n">inner</span><span class="o">=</span><span class="s1">&#39;quartile&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;No WWA Exposure&#39;</span><span class="p">,</span> <span class="s1">&#39;WWA Exposure&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Exposure to Flood WWA&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Perceived Flood Risk (1-5)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribution of Flood Risk Perception by WWA Exposure&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/8eb5e36e57ac97db33b6f780a55f691b73e915ea281348afd08ddc9faaac604c.png" src="../_images/8eb5e36e57ac97db33b6f780a55f691b73e915ea281348afd08ddc9faaac604c.png" />
</div>
</div>
</section>
</section>
<section id="quick-statistical-analyses">
<h2>Quick Statistical Analyses<a class="headerlink" href="#quick-statistical-analyses" title="Link to this heading">#</a></h2>
<p>We‚Äôre not limited to visualizations, we can explore a number of statistical procedures to really test our question of whether exposure to warnings and watches has an impact on survey responses.  For this tutorial, we will quickly conduct the following:</p>
<ol class="arabic simple">
<li><p>Chi-Square: To evaluate whether exposure to flood-related warnings and watches and perceived flood risk categories are independent, with the p-value indicating if the observed relationship is statistically significant.</p></li>
<li><p>Logistic Regression: To evaluate whether exposure to flood-related warnings and watches increases the odds of respondents reporting high or extreme flood risk compared to lower risk levels.</p></li>
<li><p>Ordinal Logistic Regression: To evaluate whether exposure to flood-related warnings and watches shifts respondents toward higher categories of perceived flood risk.</p></li>
</ol>
<section id="chi-square">
<h3>Chi-Square<a class="headerlink" href="#chi-square" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># contingency table: WWA exposure vs. risk perception</span>
<span class="n">contingency</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;flood_wwa_exposure&#39;</span><span class="p">],</span> <span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;risk_flood_label&#39;</span><span class="p">])</span>
<span class="n">chi2</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">dof</span><span class="p">,</span> <span class="n">expected</span> <span class="o">=</span> <span class="n">chi2_contingency</span><span class="p">(</span><span class="n">contingency</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Chi-square test&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Chi2 = </span><span class="si">{</span><span class="n">chi2</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, df = </span><span class="si">{</span><span class="n">dof</span><span class="si">}</span><span class="s2">, p = </span><span class="si">{</span><span class="n">p</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Chi-square test
Chi2 = 18.94, df = 4, p = 0.0008
</pre></div>
</div>
</div>
</div>
<p>This suggests that the distribution of flood risk perceptions is not independent of WWA exposure ‚Äî in other words, people who were exposed to flood-related WWAs responded differently (in terms of risk levels) than those who were not exposed.</p>
</section>
<section id="logistic-regression">
<h3>Logistic Regression<a class="headerlink" href="#logistic-regression" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Binary outcome: high risk (‚â•4) vs. lower</span>
<span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;high_risk&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;risk_flood_num&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">4</span>

<span class="c1"># Predictor: WWA exposure (cast to int)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;flood_wwa_exposure&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df_18</span><span class="p">[</span><span class="s1">&#39;high_risk&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="n">logit_model</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">Logit</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">logit_model</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Optimization terminated successfully.
         Current function value: 0.569753
         Iterations 5
                           Logit Regression Results                           
==============================================================================
Dep. Variable:              high_risk   No. Observations:                 3000
Model:                          Logit   Df Residuals:                     2998
Method:                           MLE   Df Model:                            1
Date:                Fri, 29 Aug 2025   Pseudo R-squ.:                0.003943
Time:                        12:03:53   Log-Likelihood:                -1709.3
converged:                       True   LL-Null:                       -1716.0
Covariance Type:            nonrobust   LLR p-value:                 0.0002343
======================================================================================
                         coef    std err          z      P&gt;|z|      [0.025      0.975]
--------------------------------------------------------------------------------------
const                 -1.1673      0.053    -21.959      0.000      -1.272      -1.063
flood_wwa_exposure     0.3177      0.086      3.697      0.000       0.149       0.486
======================================================================================
</pre></div>
</div>
</div>
</div>
<p>This suggests that respondents exposed to a flood WWA had significantly higher odds (about 39% greater, exp(0.3326) ‚âà 1.39) of reporting high or extreme flood risk compared to those not exposed, though the overall model explains only a small share of variation in responses.</p>
</section>
<section id="ordinal-logistic-regression">
<h3>Ordinal Logistic Regression<a class="headerlink" href="#ordinal-logistic-regression" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Drop NaNs to avoid issues</span>
<span class="n">df_ord</span> <span class="o">=</span> <span class="n">df_18</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;risk_flood_num&#39;</span><span class="p">,</span> <span class="s1">&#39;flood_wwa_exposure&#39;</span><span class="p">])</span>

<span class="c1"># Predictor must be numeric (int)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">df_ord</span><span class="p">[[</span><span class="s1">&#39;flood_wwa_exposure&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="c1"># Outcome is ordered categories (numeric risk levels already ordered 1‚Äì5)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df_ord</span><span class="p">[</span><span class="s1">&#39;risk_flood_num&#39;</span><span class="p">]</span>

<span class="c1"># Fit ordinal logistic regression</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">OrderedModel</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">distr</span><span class="o">=</span><span class="s1">&#39;logit&#39;</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;bfgs&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Optimization terminated successfully.
         Current function value: 1.471757
         Iterations: 14
         Function evaluations: 15
         Gradient evaluations: 15
                             OrderedModel Results                             
==============================================================================
Dep. Variable:         risk_flood_num   Log-Likelihood:                -4415.3
Model:                   OrderedModel   AIC:                             8841.
Method:            Maximum Likelihood   BIC:                             8871.
Date:                Fri, 29 Aug 2025                                         
Time:                        12:03:57                                         
No. Observations:                3000                                         
Df Residuals:                    2995                                         
Df Model:                           1                                         
======================================================================================
                         coef    std err          z      P&gt;|z|      [0.025      0.975]
--------------------------------------------------------------------------------------
flood_wwa_exposure     0.2810      0.069      4.069      0.000       0.146       0.416
1/2                   -2.1553      0.066    -32.758      0.000      -2.284      -2.026
2/3                    0.6227      0.031     19.825      0.000       0.561       0.684
3/4                    0.3682      0.028     13.190      0.000       0.313       0.423
4/5                    0.1778      0.044      4.057      0.000       0.092       0.264
======================================================================================
</pre></div>
</div>
</div>
</div>
<p>This suggests that respondents exposed to flood-related warnings and watches had a significantly higher likelihood of placing themselves in higher flood risk perception categories (coef = 0.296, p &lt; 0.001), indicating a consistent upward shift in perceived risk.</p>
</section>
</section>
<section id="a-bit-more-involved-did-wwas-really-affect-risk-perception">
<h2>A Bit More Involved - Did WWAs <em>Really</em> Affect Risk Perception?<a class="headerlink" href="#a-bit-more-involved-did-wwas-really-affect-risk-perception" title="Link to this heading">#</a></h2>
<p>So it appears that exposure to watches and warnings has a statistically significant impact on survey responses.  But by how much? To answer this, we can look at the <strong>predicted probabilities</strong> of survey responses.  This shows us how much exposure to a WWA changes the likelihood of a respondent reporting ‚ÄúHigh‚Äù or ‚ÄúExtreme‚Äù flood risk.</p>
<p>To do this, the code below creates two simple scenarios: one where a person had no flood alert (0) and one where they did (1).  It then uses our statistical model to predict the probability of each risk category under those two scenarios.  The results are labeled clearly as ‚ÄúNo Exposure‚Äù and ‚ÄúExposure,‚Äù giving us a side-by-side view.</p>
<p><strong>Analogy:</strong> It‚Äôs like asking, ‚ÄúWhat would the risk look like if nobody had a flood alert?‚Äù and then,  ‚ÄúWhat would the risk look like if everyone had a flood alert?‚Äù ‚Äî and comparing the two answers side by side.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make two scenarios: no exposure (0) and exposure (1)</span>
<span class="n">scenarios</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;flood_wwa_exposure&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Predict probabilities for each risk category</span>
<span class="n">pred_probs</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">scenarios</span><span class="p">)</span>

<span class="c1"># Attach labels</span>
<span class="n">pred_probs</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;No Exposure&#39;</span><span class="p">,</span> <span class="s1">&#39;Exposure&#39;</span><span class="p">]</span>
<span class="n">pred_probs</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;Risk </span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">pred_probs</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>

<span class="n">pred_probs</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Risk 0</th>
      <th>Risk 1</th>
      <th>Risk 2</th>
      <th>Risk 3</th>
      <th>Risk 4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>No Exposure</th>
      <td>0.103841</td>
      <td>0.323847</td>
      <td>0.332512</td>
      <td>0.152608</td>
      <td>0.087192</td>
    </tr>
    <tr>
      <th>Exposure</th>
      <td>0.080450</td>
      <td>0.280261</td>
      <td>0.344614</td>
      <td>0.182370</td>
      <td>0.112304</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="a-possible-interpretation">
<h2>A possible interpretation<a class="headerlink" href="#a-possible-interpretation" title="Link to this heading">#</a></h2>
<p>Respondents who were exposed to a flood WWA were less likely to report no risk (10% ‚Üí 8%) or low risk (32% ‚Üí 28%), and more likely to report higher levels of risk perception, particularly at the ‚ÄúHigh‚Äù (15% ‚Üí 18%) and ‚ÄúExtreme‚Äù (9% ‚Üí 11%) categories. While the percentage point changes may look modest, they indicate a clear upward shift in perceived flood risk among those who received WWAs.  In other words, I think it is possible to say that exposure to a flood warning nudged people away from saying ‚Äòno risk‚Äô and toward saying ‚Äòhigh or extreme risk.  However, with only 3,000 responses, I probably wouldn‚Äôt.  But, as the academics say, this requires further study. üòâ</p>
<p>Now let‚Äôs take a look at a visualization of these results.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#let&#39;s see HOW the probability distribution shift</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">pred_probs</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Predicted Flood Risk Perception by WWA Exposure&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Probability&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Perceived Flood Risk Level&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;WWA Exposure&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/1b85829d3e04b02b375fc3f8c9827ddf31b80d3af8e622605f45d4c6192832e0.png" src="../_images/1b85829d3e04b02b375fc3f8c9827ddf31b80d3af8e622605f45d4c6192832e0.png" />
</div>
</div>
</section>
<section id="wrapping-up">
<h2>Wrapping Up<a class="headerlink" href="#wrapping-up" title="Link to this heading">#</a></h2>
<p>In this tutorial, we explored how to bring together <strong>social survey data</strong> and <strong>weather warning data</strong> to better understand how hazard information influences perceptions of risk. Using the Jupyter Notebook environment, you learned how to:</p>
<ul class="simple">
<li><p><strong>Work with APIs</strong> to search for, access, and download data programmatically</p></li>
<li><p>Organize and explore datasets interactively using python libraries like <strong>pandas</strong> and <strong>requests</strong>.</p></li>
<li><p>Merge survey data with external data from the <strong>Iowa Environmental Mesonet</strong></p></li>
<li><p>Apply <strong>geospatial tools</strong> to handle location-based data</p></li>
<li><p>Create clear, reproducible <strong>visualizations</strong> and <strong>statistical analyses</strong> directly alongside your analysis</p></li>
<li><p>Document your process in a way that combines code, results, and explanation all in one place</p></li>
</ul>
<p>With this walkthrough, you‚Äôve seen how Jupyter can serve as both a <strong>research lab and a communication tool</strong>‚Äîa space where you can work with data, analyze the data, visualize the data and results, and explain what you found.</p>
<section id="moving-forward">
<h3>Moving Forward<a class="headerlink" href="#moving-forward" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Try adapting this workflow to other survey topics (e.g., heat, drought, tornado risk)</p></li>
<li><p>Explore additional Mesonet or NOAA APIs to enrich your analysis with different kinds of data</p></li>
<li><p>Use Jupyter notebooks to build <strong>reproducible reports</strong>, where readers can see not just your conclusions but also the steps you took to get there</p></li>
<li><p>Share your notebooks with collaborators as a way to make your analysis <strong>transparent and interactive</strong></p></li>
</ul>
<p>Ultimately, the key takeaway is that with just a few tools‚Äî<strong>APIs, pandas, geospatial libraries, and Jupyter notebooks</strong>‚Äîyou can connect diverse datasets, analyze them in context, and tell meaningful data stories about risk and society.</p>
<hr class="docutils" />
<p><strong>Thank you for following along!</strong><br />
We encourage you to take this workflow and apply it to your own research questions about weather, risk, and society‚Äîthe more you explore, the more insights you‚Äôll uncover.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../tutorials/forum2-overview.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Forum 2 Overview - From Metadata to Insights</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Forum 2 - From Metadata to Insights</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#goals">Goals:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-this">Why do this?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-and-setup-imports">Introduction and Setup (Imports)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-search-for-datasets">Step 1: Search for Datasets</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-search-for-10-results">Simple search for 10 results</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#search-with-more-than-10-results">Search with more than 10 results</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#subsetting-our-results">Subsetting Our Results</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-get-dataset-metadata-and-files">Step 2: Get Dataset Metadata and Files</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-metadata-for-a-single-dataset">Getting metadata for a single dataset</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#file-level-metadata">File level metadata</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#full-dataset-metadata">Full dataset metadata</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transform-the-results-from-json">Transform the results from JSON</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-metadata-for-multiple-datasets">Getting metadata for multiple datasets</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-download-a-file">Step 3: Download a File</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examine-the-dataset">Examine the dataset</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#variable-names">Variable names</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#unfortunately-nws-region-only-has-four-regions-nonetheless-it-might-be-useful-at-some-point">Unfortunately, ‚Äúnws_region‚Äù only has four regions.  Nonetheless, it might be useful at some point.</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#break">Break</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-4-merge-with-weather-data">Step 4: Merge with Weather Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iowa-mesonet-api-do-not-run-at-this-time">Iowa Mesonet API - DO NOT RUN AT THIS TIME</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iowa-mesonet-data-joining-the-survey-data-with-weather-alerts">Iowa Mesonet Data - Joining the Survey Data with Weather Alerts</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exporting-the-data-for-use-outside-jupyter">Exporting the Data for Use Outside Jupyter</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examining-the-data">Examining the Data</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-visualizations">Quick visualizations</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-wwwas-by-survey-reponses">Visualizing WWWAs by Survey Reponses</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-statistical-analyses">Quick Statistical Analyses</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#chi-square">Chi-Square</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#logistic-regression">Logistic Regression</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ordinal-logistic-regression">Ordinal Logistic Regression</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-bit-more-involved-did-wwas-really-affect-risk-perception">A Bit More Involved - Did WWAs <em>Really</em> Affect Risk Perception?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-possible-interpretation">A possible interpretation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#wrapping-up">Wrapping Up</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#moving-forward">Moving Forward</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      ¬© Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>